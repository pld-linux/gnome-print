diff -Nru gnome-print-0.25/macros/ChangeLog gnome-print-0.25.new/macros/ChangeLog
--- gnome-print-0.25/macros/ChangeLog	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/ChangeLog	Wed Feb  7 23:53:06 2001
@@ -0,0 +1,1068 @@
+2001-02-07  Kenneth Christiansen  <kenneth@gnu.org>
+
+	* autogen.sh: Added test for xml-i18n-tools if 
+	AM_PROG_XML_I18N_TOOLS is found.
+
+2001-01-05  Maciej Stachowiak  <mjs@eazel.com>
+
+	* autogen.sh: Added missing PROG.
+
+2001-01-05  Maciej Stachowiak  <mjs@eazel.com>
+
+	* autogen.sh: xml-i18n-toolize if AM_PROG_XML_I18N_TOOLS is found
+	in configure.in.
+
+2000-11-05  Martin Baulig  <baulig@suse.de>
+
+	* gnome-bonobo-check.m4 (BONOBO_CFLAGS, BONOBO_LIBS): Added
+	stuff for `bonobox'.
+
+2000-08-01  Pavel Roskin  <proski@gnu.org>
+
+	* curses.m4: AC_WARN replaced with AC_MSG_WARN in comments
+
+2000-06-23  Stanislav Brabec  <utx@penguin.cz>
+
+	* gnome-pilot.m4: Use 'PISOCK_INCLUDEDIR' in pisock version check.
+
+2000-06-17  Dan Winship  <danw@helixcode.com>
+
+	* autogen.sh: exit immediately if aclocal, autoheader, automake,
+	or autoconf fails, rather than continuing on with broken state.
+	(In the aclocal case, print a hopefully-useful explanatory
+	message.)
+
+2000-06-13  Martin Baulig  <baulig@suse.de>
+
+	* gnome-bonobo-check.am (AM_BONOBO_USES_OAF): New macro.
+	Checks whether Bonobo uses OAF and defines `BONOBO_USES_OAF'
+	if appropriate. Also provides `BONOBO_USES_OAF' automake
+	conditional.
+
+2000-06-13  Martin Baulig  <baulig@suse.de>
+
+	* Makefile.am (EXTRA_DIST): Added `gnome-gettext.m4'.
+	(gnome_aclocal_DATA): Added `gnome-gettext.m4'.
+
+2000-05-29  Martin Baulig  <baulig@suse.de>
+
+	* gnome-autogen.sh: Moved to the `bin/' directory.
+
+2000-05-29  Martin Baulig  <baulig@suse.de>
+
+	* gnome-autogen.sh: If `USE_GNOME_2_MACROS' is set, use the
+	GNOME 2.0 macros from the `macros2' directory.
+
+2000-05-29  Martin Baulig  <baulig@suse.de>
+
+	* gnome-common.m4, Makefile.am: Install macros to
+	`$(datadir)/aclocal/gnome-macros' when INSIDE_GNOME_COMMON.
+
+	* gnome-autogen.sh: New file. When using gnome-common instead
+	of the macros/ directory, use this in your autogen.sh.
+
+2000-05-15  Russell Steinthal  <rms39@columbia.edu>
+
+	* gnome-pilot.m4 (PILOT_LIBS): An attempt to fix the gnome-pilot
+	check on Solaris (`$GNOME_CONFIG ...` returns more than one word,
+	so we need quotes around it to keep test from bombing out)
+
+2000-05-01  Dan Winship  <danw@helixcode.com>
+
+	* gnome-pilot.m4 (PILOT_LIBS): "But that trick NEVER works!"
+	"This time for sure!"
+
+Sun Apr 23 12:15:14 2000  George Lebl <jirka@5z.com>
+
+	* gnome.m4: add an extra lib of docklets.  These checks are
+	  braindamaged though, they don't fail and thus gnome-core for
+	  example compiles without gnomecc.  There need to be separate .m4
+	  files or checks
+
+2000-04-19  Eskil Heyn Olsen  <deity@eskil.dk>
+
+	* gnome-pilot.m4 (PILOT_LIBS): Changed the error string for gnome-pilot
+	(PILOT_LIBS): Fixes the gnome-config check
+
+2000-04-10  Dan Winship  <danw@helixcode.com>
+
+	* gnome-pilot.m4 (PILOT_LIBS): Fix a bug introduced in the
+	gnome-pilot-config to "gnome-config gpilot" change that caused not
+	having pilot-link installed to become a fatal error.
+
+2000-02-26  James Henstridge  <james@daa.com.au>
+
+	* gnome-gettext.m4: fix up check of LINGUAS variable so that we don't
+	get problems when LINGUAS contains `en' and ALL_LINGUAS contains
+	`en_GB' for instance.
+
+2000-02-22  Martin Baulig  <martin@home-of-linux.org>
+
+	* autogen.sh: Don't run libtoolize when `NO_LIBTOOLIZE' is set.
+
+2000-02-09  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* autogen.sh: Fix GNUism introduced in the previous fix.
+
+2000-02-08  Miguel de Icaza  <miguel@gnu.org>
+
+	* autogen.sh: Handle non GNU find programs. 
+
+2000-02-05  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-types.m4 (AC_LIBGTOP_CHECK_TYPE): New macro. This
+	is an improved version of AC_CHECK_TYPE which takes into account
+	that we need to #include some other header files on some systems
+	to get some types.
+	(GNOME_LIBGTOP_TYPES): Check for <sys/bitypes.h> for Tru64 and
+	use AC_LIBGTOP_CHECK_TYPE rather than AC_CHECK_TYPE.
+
+2000-01-26  Dave Camp  <campd@oit.edu>
+	
+	* gnome-bonobo-check.m4 Include <bonobo.h> rather than 
+	<bonobo/gnome-object.h>
+
+2000-01-26  Dave Camp  <campd@oit.edu>
+
+	* gnome-bonobo-check.m4: Check for bonobo_object_get_type() rather 
+	than gnome_object_get_type().
+
+2000-01-23  Peter Teichman  <peter@helixcode.com>
+
+	* gnome-pilot.m4: i broke the version-checking macro for other
+	distribs in my last commit. fixing that now.
+
+2000-01-22  Peter Teichman  <peter@helixcode.com>
+
+	* gnome-pilot.m4 (PILOT_LIBS): fix the version-checking macro for
+	debian
+
+2000-01-20  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-objc-checks.m4: Look for sched_yield in -lrt, too.
+	Suggested by Drazen Kazar <dave@srce.hr>.
+
+2000-01-16  Vadim Strizhevsky  <vadim@optonline.net>
+
+	* gnome-pilot.m4: Fix typo in PILOT_LINK_HOOK.
+
+2000-01-15  Eskil Heyn Olsen  <deity@eskil.dk>
+	
+	* gnome-pilot.m4: PILOT_LINK_HOOK now check pilot-link version.
+	GNOME_PILOT_CHECK defaults to requiring 0.9.3.
+	
+2000-01-09  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-check.m4: Applied patch from R. Bernstein
+	<rocky@panix.com> - print a better error message when
+	LibGTop's major version number mismatches.
+
+1999-12-25  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-pilot.m4: Applied patch from Colin Walters to make
+	it compile under Debian GNU/Linux.
+
+1999-12-05  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-checks.m4: Removed all guile variables.
+
+1999-11-18  Jeff Garzik  <jgarzik@mandrakesoft.com>
+
+	* gnome-xml-check.m4: Better scoping of below fix.
+
+1999-11-16  Jeff Garzik  <jgarzik@mandrakesoft.com>
+
+	* gnome-xml-check.m4: always AC_SUBST GNOME_XML_LIB, so that
+	output variable will always be present.
+
+1999-11-09  Eskil Heyn Olsen  <deity@eskil.dk>
+
+	* gnome-pilot.m4: uses test -r instead of test -e, was reported as 
+	a portability bug wrt solaris.
+
+1999-10-31  Eskil Heyn Olsen  <deity@eskil.dk>
+
+	* gnome-pilot.m4: added PILOT_LINK_CHECK, used by
+	GNOME_PILOT_CHECK. Adds --with-pisock=$dir_for_pilot_link.
+
+1999-10-24  Jacob Berkman  <jberkman@andrew.cmu.edu>
+
+	* gnome-ghttp-check.m4: this should be a better fix
+
+1999-10-21  Jacob Berkman  <jberkman@andrew.cmu.edu>
+
+	* gnome-ghttp-check.m4: use a temp value until we know that
+	ghttp exists.  This will hopefully fix building on Solaris 
+	machines
+
+1999-09-26  Jody Goldberg <jgoldberg@home.com>
+
+	* compiler-flags.m4 : Remove -Wpointer-arith.  It generates large
+	  numbers of warnings under glibc2.1.2 with a recent egcs release.
+	  The glibc maintainers have suggested removing this flag because it
+	  is useless.
+
+1999-09-01  Havoc Pennington  <hp@pobox.com>
+
+	* gnome-xml-check.m4: If you're going to AC_PATH_PROG then use the
+	prog you find :-)	
+
+1999-08-02  Peter Teichman  <pat4@acpub.duke.edu>
+
+	* removed gnome-conduit-check.m4 - it should be distributed with
+	gnome-pilot
+
+1999-07-30  Peter Teichman  <pat4@acpub.duke.edu>
+
+	* gnome-conduit-check.m4: added new file of checks. anything that
+	provides a pilot conduit is going to want this
+
+1999-07-07  Tuomas J. Lukka  <lukka@iki.fi>
+	* gnome-x-checks.m4: add a comment on how to get gtk-1.3 and
+	glib 1.3 from CVS
+
+1999-07-06  Tuomas J. Lukka  <lukka@iki.fi>
+
+	* gnome-x-checks.m4: forbid compiling with Gtk-1.3 for now.
+        gnome only works with 1.2 so far. 
+
+1999-07-05  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome.m4: Make "extra library" message slightly easier to read.
+
+Sat Jun 26 01:47:53 1999  Tim Janik  <timj@gtk.org>
+
+	* compiler-flags.m4: give -Wunused to gcc instead of -Wno-unused.
+
+1999-06-11  Tuomas J. Lukka <lukka@iki.fi>
+
+	* gnome-guile-checks.m4: Debian has qt_null in -lqthreads but
+ 	  no main. Changed both checks for 'main' to qt_null.
+	  I hope this is correct - it shouldn't break anything.
+
+1999-05-11  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* Makefile.am (MACROS): Add `gnome-bonobo-check.m4'.
+
+1999-05-09  Jacob Berkman  <jberk+@cmu.edu>
+
+	* gnome-bonobo-check.m4: made test program return 0,
+	changed BONOBO_CHECK to not return "failure" on success
+
+1999-04-16  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-print-check.m4 (GNOME_PRINT_CHECK): Fix invocation of
+	AM_PATH_GNOME_PRINT. 
+	* Makefile.am (MACROS): Sort lines.
+
+Sun Mar 28 23:39:48 1999  Norbert Warmuth  <nwarmuth@privat.circular.de>
+
+	* gnome-vfs.m4: Add --with-vfs option. GNOME_VFS_LIBS still needs
+	to be fixed but that's not a problem because there's no libvfs, yet.
+
+1999-03-10  Tomislav Vujec  <tvujec@carnet.hr>
+
+	* aclocal-include.m4 (AM_ACLOCAL_INCLUDE): Add ACLOCAL_FLAGS in
+	ACLOCAL. This allows maintainer rules to work if any of the macros
+	change.
+
+1999-03-10  Tomislav Vujec  <tvujec@carnet.hr>
+
+	* gnome.m4 (GNOME_INIT_HOOK): Wrapped position parameter in
+	testing for additional inits. It gets expanded while generating
+	configure, resulting in an empty parameter list - syntax error in
+	for statement.
+
+1999-03-09  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome.m4 (GNOME_INIT): Add a new paramater, which is passed to
+	GNOME_INIT_HOOK. 
+	(GNOME_INIT_HOOK): New parameter "additional inits".  This is a
+	list like "applets capplet", and the corresponding
+	GNOME_APPLETS_LIBS and GNOME_CAPPLETS_LIBS are defined.
+
+1998-03-01  Mark Crichton <crichton@gimp.org>
+
+	* gnome-objc-checks : Added HAVE_GNOME_OBJC conditional
+
+1998-02-27  Gregory McLean <gregm@comstar.net>
+
+	* gnome-x-checks.m4 : Require at least gtk+ 1.2 (pointless getting
+	bug reports with an old glib/gtk/gdk set..)
+
+1999-02-25  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-checks.m4: Require LibGTop >= 1.0.0.
+
+1999-02-22  Miguel de Icaza  <miguel@nuclecu.unam.mx>
+
+	* compiler-flags.m4: Only add the compilation warnings if the
+	compiler is GCC.
+
+1999-02-20  Timur Bakeyev <mc@bat.ru>
+
+	* gnome.m4: Added and exported ZVT_LIBS.
+
+Tue Feb 16 19:35:42 1999  Owen Taylor  <otaylor@redhat.com>
+
+	* gnome-x-checks.m4: Require GTK+-1.1.16.
+
+1999-02-15  Timur Bakeyev <mc@bat.ru>
+
+	* gnome-gettext.m4: Work around a bug in BSDI's native sh, which in-
+	correctly expands ${LINGUAS=$ALL_LINGUAS}. Switched to if/fi variant.
+
+1999-02-15  Chris Lahey  <clahey@umich.edu>
+
+	* gnome-print-check.m4: Copied this from libhnj/libhnj.m4.  Almost
+	completely replaced the old version.  The only usage difference is
+	that it defines GNOME_PRINT_LIBS instead of GNOME_PRINT_LIB and
+	defines GNOME_PRINT_CFLAGS as well.
+
+1999-02-10  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-objc-checks.m4: Applied a patch from Kenneth Stailey;
+	use $CFLAGS when invoking $OBJC so the user can add additional
+	include paths.
+
+1999-02-05  Martin Baulig  <martin@home-of-linux.org>
+
+	* compiler-flags.m4: Don't add warning and compiler flags to
+	the CFLAGS and CXXFLAGS when they're cached. This fixes the
+	problem that CFLAGS and CXXFLAGS get longer and longer each
+	time you run a `config.status --recheck'.
+
+1999-02-04  Martin Baulig  <martin@home-of-linux.org>
+
+	* aclocal-include.m4 (INSIDE_GNOME_COMMON): New automake
+	conditional that's always false.
+
+	* gnome-common.m4: New file. This defines a `GNOME_COMMON_INIT'
+	macro that should be used in all GNOME Applications outside
+	the CVS tree.
+
+	* Makefile.am: If we are `INSIDE_GNOME_COMMON', install all
+	$(MACROS), autogen.sh, gnome-common.m4 and a newly created
+	gnome-macros.dep in `$(datadir)/aclocal/gnome'.
+
+1999-01-24  Timur Bakeyev <mc@bat.ru>
+
+	* gnome-pthread-check.m4: Add recognition of 2 more libraries - 
+	pthreads and pthread-support build in libc (as on BSDI).
+
+1999-01-23  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-checks.m4 (GNOME_LIBGTOP_DOCU): New macro. This
+	checks whether you have the LibGTop documentation installed and
+	defines `HAVE_LIBGTOP_DOCU' if appropriate. Also provides automake
+ 	conditional.
+
+1999-01-20  Martin Baulig  <martin@home-of-linux.org>
+
+	* acinclude.m4 (ac_result): Unset CATOBJEXT so
+	that the macros and Makefiles correctly handle
+	disabling NLS when no gettext is found.
+
+1999-01-19  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-cxx-check.m4 (GNOME_CHECK_CXX): Rewrite to be saner.  
+	Don't limit yourself to a fixed set of names for the compiler.
+
+1999-01-06 Nat Friedman   <nat@nat.org>
+
+	* Makefile.am (MACROS): Added gnome-print-check.m4 to MACROS
+
+1999-01-05  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-support.m4: Include dirent.h before checking whether
+	`scandir' needs to be declared.
+	* need-declaration.m4: Revert change.
+
+1999-01-05  Miguel de Icaza  <miguel@nuclecu.unam.mx>
+
+	* need-declaration.m4, gnome-support.m4: Fixed the scandir detection.
+
+1998-12-22  Jeff Garzik  <jgarzik@pobox.com>
+
+	* gnome.m4:  Added and exported GNOME_APPLET_LIBS.
+
+1998-12-16  Sebastian Wilhelmi  <wilhelmi@ira.uka.de>
+
+	* gnome-support.m4: Removed all the stuff for argp, that was
+	causing gnomesupport not to build.
+
+1998-12-15  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-gettext.m4: Add the hacked version of the gettext
+	macros that is used in Gtk+ here.
+
+	* autogen.sh: Accept both AM_GNU_GETTEXT and AM_GNOME_GETTEXT.
+	 
+1998-12-15  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-check.m4: All parts of GNOME will now require
+	LibGTop >= 0.99.0 which is the latest version from CVS and
+	already feature-freezed for GNOME 1.0.
+	
+1998-12-09  Martin Baulig  <martin@home-of-linux.org>
+
+	* aclocal-include.m4 (AM_ACLOCAL_INCLUDE): Make this work
+	with more than one directory.
+
+1998-12-08  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-sysdeps.m4: Moved into the LibGTop module.
+	This file contains too much stuff that should only be used
+	internally in LibGTop, so it's better to have it there.
+
+1998-12-06  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-sysdeps.m4: Recognice OpenBSD as a valid
+	system and use the `freebsd' sysdeps directory for it.
+
+Sat Dec  5 23:30:01 PST 1998 Manish Singh <yosh@gimp.org>
+
+	* gnome-guile-checks.m4: clear GUILE_LIBS and GUILE_INCS if
+	guile isn't there (quick fix)
+
+1998-12-05  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-sysdeps.m4: Recognice NetBSD as a valid
+	system and use the `freebsd' sysdeps directory for it.
+
+1998-12-03  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-sysdeps.m4 (GLIBTOP_LINUX_VERSION_CODE):
+	Define this to be the same as LINUX_VERSION_CODE either from
+	<linux/version.h> or from the running kernel.
+
+1998-12-02  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* autogen.sh: "Improve" indentation and messages somewhat.
+
+1998-12-01  Jeff Garzik  <jgarzik@pobox.com>
+
+	* autogen.sh:
+	Platform fixes.  grep -q is not portable, do not use.
+
+1998-12-01  Changwoo Ryu  <cwryu@adam.kaist.ac.kr>
+
+	* autogen.sh: Run gettextize if needed.
+	: Run libtoolize only if configure.in has "^AM_PROG_LIBTOOL".
+
+1998-11-30  Jeff Garzik  <jgarzik@pobox.com>
+
+	* gnome.m4: Re-arranged tests such that "--without-gnome" is
+	fully supported.  Not only is the logic now correct, programs
+	can test "want_gnome=yes/no" for the results of this arg.
+
+1998-11-27  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-check.m4: All parts of GNOME will now require
+	LibGTop >= 0.29.0 which is the latest version from CVS.
+
+1998-11-20  James Henstridge  <james@daa.com.au>
+
+	* gnome.m4(GNOME_INIT_HOOK): Changed the call to GNOME_GNORBA_CHECK
+	to GNOME_GNORBA_HOOK([],$2).  Before if you specified that the
+	macro should not exit on errors, and you didn't have ORBit, the
+	script would fail anyway.
+
+1998-11-17  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-sysdeps.m4: We need to check for <net/if_var.h>
+	and conditionally include it before <net/if_isppp.h> in the code
+	that check for I4B to make it work on FreeBSD 3.0.
+	
+1998-10-25  Marius Vollmer  <mvo@zagadka.ping.de>
+
+	* gnome-guile-checks.m4: Add GUILE_LIBS to LIBS when checking
+	whether guile works.  Adding them to LDFLAGS does not work on all
+	systems.  (Thanks to Rusty Chris Holleman)
+
+1998-11-12  Andrew T. Veliath  <andrewtv@usa.net>
+
+	* gnome-orbit-check.m4: Remove AC_DEFINE(HAVE_ORBIT). Add
+	AM_CONDITIONAL for HAVE_ORBIT.  gnome-gnorba-check.m4: Same with
+	HAVE_GNORBA.  Change GNOME_ORBIT_HOOK and GNOME_GNORBA_HOOK to use
+	AC_CACHE_CHECK, setting both gnome_cv_orbit_found and
+	gnome_cv_gnorba_found.
+
+	* gnome.m4: (GNOME_INIT_HOOK): Add GNOME_GNORBA_CHECK if
+	gnome-config is found.  New GNOMEGNORBA_LIBS library variable
+	(GNOMEGNORBA_LIBS is a superset of GNOMEUI_LIBS).  Update
+	GNOME_LIBDIR and GNOME_INCLUDEDIR to to include the required
+	Gnorba info, if it is in a different location.
+
+	* Makefile.am (MACROS): Add gnome-gnorba-check.m4 to Makefile.
+	
+	* gnome-gnorba-check.m4: New file.
+
+1998-11-12  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-support.m4 (vsnprintf): Remove easy-vsnprintf hack -- it
+	doesn't work for Solaris 2.5 binaries running on Solaris 2.6.
+	From Frederic Devernay <devernay@istar.fr>.
+
+1998-11-06  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-support.m4: Fix stupid type (sterror_r -> strerror_r).
+
+1998-11-04  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-support.m4 (need_gnome_support): Set this unconditionally
+	to `yes'.  We'll soon be losing this variable.
+
+1998-10-20  Andrew Veliath  <andrewtv@usa.net>
+
+	* gnome-orbit-check.m4 (GNOME_ORBIT_HOOK): Add ORBIT_IDL
+	detection; fix failure flag.
+
+1998-10-12  Martin Baulig  <martin@home-of-linux.org>
+
+	* compiler-flags.m4 (warnCFLAGS): Added `-Wno-unused'.
+
+1998-10-11  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-sysdeps.m4 (libgtop_postinstall): Use `:' instead
+	of the empty string if there is nothing to do since the empty string
+	is no valid shell sytax.
+
+1998-10-11  Marius Vollmer  <mvo@zagadka.ping.de>
+
+	* gnome-guile-checks.m4: Check for "guile-config" and then for
+	"build-guile", if guile-config couldn't be found.  Do not
+	explicitely include output from "info libdir", it is already
+	included in "link".  Use "compile" instead of "info includedir".  Do
+	not include "1.2" in error message when Guile can't be found at
+	all.
+	
+1998-10-11  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-check.m4 (GNOME_INIT_LIBGTOP): Added optional
+	third parameter which is the `script-if-enabled' parameter of
+	the GNOME_LIBGTOP_HOOOK.
+
+1998-10-05  Karl Eichwalder <ke@suse.de>
+
+	* gnome-xml-check.m4: Fix typo while signaling the error.
+
+1998-10-05  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* compiler-flags.m4 (warnCFLAGS): Remove `-W'.
+	(warn-unused): Remove.
+
+1998-10-01  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-sysdeps.m4 (libgtop_postinstall): 
+	Added `AC_SUBST(libgtop_postinstall)'. This is used in
+	`src/daemon/Makefile.am' to make the server suid root or
+	sgid kmem if required.
+
+1998-09-28  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-check.m4: Make it accept libgtop >= 0.25.0 again.
+
+	* gnome-libgtop-sysdeps.m4: Make the default not to build the
+	LibGTop examples.
+
+	* compiler-flags.m4 (--enable-warn-unused): New configure parameter
+	to add `-Wunused' to the warning flags.
+	
+1998-09-27  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-check.m4: Make it require libgtop >= 0.26.2.
+
+1998-09-24  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-ghttp-check.m4: Add checks for -lsocket -lnsl.
+
+1998-09-18  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-support.m4: Remove commented out code.
+
+1998-09-12  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-sysdeps.m4: Added (AC_SUBST): `libgtop_have_sysinfo'.
+
+1998-09-09  Martin Baulig  <baulig@merkur.uni-trier.de>
+
+	* gnome-libgtop-sysdeps.m4: Added check for SMP support.
+	(--with-libgtop-smp): New parameter, default is to enable
+	it only if you're running configure on a SMP system.
+	Added (AC_DEFINE): `HAVE_LIBGTOP_SMP' if enabled.
+	(LIBGTOP_SMP): New automake conditional.
+
+1998-09-02  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-support.m4: Remove check for `canonicalize_file_name'.
+
+1998-09-02  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-support.m4: Check for canonicalize_file_name () and
+ 	realpath () and add `canonicalize.o' to LIBOBJS if required.
+
+1998-08-30  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-check.m4: Added (AC_SUBST): `LIBGTOP_VERSION_CODE'.
+	Added (AC_DEFINE_UNQUOTED): `LIBGTOP_VERSION', `LIBGTOP_VERSION_CODE',
+	`LIBGTOP_{MAJOR,MINOR,MICRO,SERVER}_VERSION'.
+
+1998-08-29  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-check.m4: Make it require libgtop >= 0.26.0.
+	Added (AC_SUBST): `LIBGTOP_INTERFACE_AGE' and `LIBGTOP_BINARY_AGE'.
+
+1998-08-27  Christopher Blizzard  <blizzard@appliedtheory.com>
+
+	* gnome-ghttp-check.m4: Umm...I think this works better.  Doesn't
+ 	break anything anyway.
+	Oooo...it actually works now.  Forgot a ,
+
+1998-08-26  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-check.m4 (GNOME_INIT_LIBGTOP): Make it work
+	with a brain-dead /bin/sh and a brain-dead /bin/test.
+	
+	* gnome-libgtop-check.m4 (GNOME_INIT_LIBGTOP): Use `AC_MSG_WARN'
+	if LibGTop cannot be found and the `fail' argument is not given.
+
+1998-08-24  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-support.m4 (GCC_NEED_DECLARATIONS): Added `setreuid',
+	`setregid' and `getpagesize'.
+	(AC_TYPE_UID_T): New check.
+
+1998-08-24  Christopher Blizzard  <blizzard@appliedtheory.com>
+
+	* Makefile.am (MACROS): Add gnome-ghttp-check.m4 to the Makefile.
+
+1998-08-23  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-check.m4 (GNOME_INIT_LIBGTOP): You can give
+	this macro two parameters: the required version number and
+	an optional `fail' argument to make it fail if LibGTop is
+	not found.
+
+1998-08-22  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-guile-checks.m4: Added check for `-lnsl' and `-lsocket'
+	if `build-guile' cannot be found.
+
+1998-08-20  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* compiler-flags.m4: New file.  Defines the
+	GNOME_COMPILER_WARNINGS macro.
+	* autogen.sh (conf_flags): Add `--enable-compile-warnings' to list
+	of flags passed to `configure'.
+	* Makefile.am (MACROS): Add compiler-flags.m4.
+
+1998-08-18  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-check.m4: make it require libgtop >= 0.25.0.
+	Added (AC_SUBST): `LIBGTOP_MICRO_VERSION' and `LIBGTOP_EXTRA_LIBS'.
+	
+1998-08-17  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-check.m4: Completely rewrote this file. It
+	uses now the `libgtop-config' script and also checks for
+	correct libgtop version.
+
+1998-08-06  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-sysdeps.m4: Added `freebsd' directory.
+
+1998-08-04  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-x-checks.m4: Define USE_DEVGTK unconditionally to `true'.
+
+1998-08-04  Stuart Parmenter  <pavlov@innerx.net>
+
+	* gnome-x-checks.m4: (AM_PATH_GTK) make it require GTK >= 1.1.1
+	dnl'd the dev_gtk since they will have to anyways.
+
+1998-08-04  Sebastian Wilhelmi  <wilhelmi@ira.uka.de>
+
+	* gnome.m4: (GNOME_INIT_HOOK): Call $1 also, if `gnome-config' is
+	found and used
+
+1998-08-02  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome.m4 (GNOME_CONFIG): Use the `gnome-config' program if it
+	exists. 
+
+1998-08-01  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* Makefile.am (EXTRA_DIST): Remove `macros.dep'.
+
+1998-07-30  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-check.m4 (GNOME_LIBGTOP_TYPES): New macro.
+	Checks for `u_int64_t' and `int64_t'.
+
+1998-07-29  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-check.m4: Added (AC_SUBST):
+	`LIBGTOP_NAMES_LIBS', `LIBGTOP_NAMES_INCS',
+	`LIBGTOP_GUILE_LIBS', `LIBGTOP_GUILE_NAMES_LIBS',
+	`LIBGTOP_MAJOR_VERSION', `LIBGTOP_MINOR_VERSION',
+	`LIBGTOP_VERSION'.
+
+	* gnome-libgtop-sysdeps.m4 (libgtop_sysdeps_dir):
+	Added `AC_SUBST(libgtop_sysdeps_dir)'.
+
+1998-07-29  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-support.m4: Check for functions that `error.c' looks for.
+
+1998-07-29  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-fileutils.m4 (AM_FUNC_ERROR_AT_LINE): Removed.
+
+	* gnome-support.m4 (AM_FUNC_ERROR_AT_LINE): New check.
+
+1998-07-27  Federico Mena Quintero  <federico@nuclecu.unam.mx>
+
+	* gnome-x-checks.m4: Changed Gtk version test to use
+	GTK_HAVE_FEATURES_1_1_0.
+
+Sun Jul 26 13:59:53 EDT 1998  Daniel Veillard <Daniel.Veillard@w3.org>
+
+	* Makefile.am (MACROS): Added gnome-xml-check.m4
+	* gnome-xml-check.m4: New file.
+
+1998-07-24  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-check.m4: No longer requiring
+	`GNOME_LIBGTOP_SYSDEPS'.
+
+Fri Jul 24 00:45:38 1998  Tom Tromey  <tromey@cygnus.com>
+
+	* Makefile.am (MACROS): Added linger.m4.
+	* linger.m4: New file.
+
+Thu Jul 23 22:41:23 1998  Tom Tromey  <tromey@cygnus.com>
+
+	* Makefile.am (MACROS): Added gnome-undelfs.m4, gnome-vfs.m4.
+	* gnome-undelfs.m4: New file.
+	* gnome-vfs.m4: New file.
+
+1998-07-22  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-fileutils.m4: Added some reasonable defaults to allow
+	cross compiling; removed `mountlist.o' and `fsusage.o' from
+	LIBOBJS.
+
+Tue Jul 21 23:44:53 1998  Tom Tromey  <tromey@cygnus.com>
+
+	* gnome-guile-checks.m4: If no build-guile, link against readline
+	before termcap.
+
+1998-07-15  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* Makefile.am (MACROS): Add `need-declaration.m4'.
+
+	* gnome-support.m4 (AC_REPLACE_FUNCS): Add memmove, strtod,
+	strtol, strtoul.
+	(GCC_NEED_DECLARATIONS): New check.  Check whether `gethostname'
+	needs to be declared.
+
+	* need-declaration.m4: New file.  Stolen from EGCS.
+
+1998-07-13  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-support.m4 (AC_REPLACE_FUNCS): Add check for `mkstemp'.
+
+Wed Jul  1 13:50:39 1998  Scott D. Heavner  <sdh@po.cwru.edu>
+
+	* curses.m4: add some docs and start using with tcd
+
+1998-06-29  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* Makefile.am (MACROS): Add all the `.m4' files here.
+
+Mon Jun 29 11:12:04 1998  Scott D. Heavner  <sdh@po.cwru.edu>
+
+	* curses.m4: Need AC_SUBST(CURSES_INCLUDEDIR) not CURSES_INCLUDES
+
+Mon Jun 29 10:35:22 1998  Scott D. Heavner  <sdh@po.cwru.edu>
+
+	* curses.m4: rm conftext* should read rm conftest*, was leaving 
+	conftest.c files around.
+
+1998-06-27  Christopher Blizzard  <blizzard@foo.appliedtheory.com>
+
+	* gnome-objc-checks.m4: Use egcs if it's available.  The gcc that
+	ships with RedHat 5.1 doesn't do objc, egcs does.
+
+Fri Jun 26 14:36:08 1998  Scott D. Heavner  <sdh@po.cwru.edu>
+
+	* curses.m4 (AC_CHECK_CURSES): New check. mangled out of mc's
+	configure.in 
+
+1998-06-24  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-fileutils.m4 (AM_FUNC_ERROR_AT_LINE): New check.
+	(vprintf): New check.
+	(ftruncate.c): Remove check.  
+	This needs to be further cleaned up to only list what is
+	needed for gdiskfree.
+	* Makefile.am (MACROS): Add gnome-fileutils.m4.
+	
+1998-06-14  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-sysdeps.m4 (LINUX_TABLE): New automake conditional;
+	also defines HAVE_LINUX_TABLE.
+
+1998-06-13  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-sysdeps.m4: Added check for the table ()
+	system call in the linux kernel.
+
+1998-06-11  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-x-checks.m4 (USE_DEVGTK): Use AC_EGREP_CPP rather than
+	AC_CHECK_HEADER.  AC_CHECK_HEADER is fooled by warnings.
+
+	* gnome-support.m4 (AC_PROG_AWK): Look for awk.
+	(CROSS_COMPILING): Remove conditional.
+	
+Wed Jun 10 14:19:39 EDT 1998 Gregory McLean <gregm@comstar.net>
+
+	* gnome-x-checks.m4: More tweeks to make building against gtk 1.0
+	  and gtk1.1 less painful.
+
+1998-06-08  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-support.m4 (CROSS_COMPILING): New automake conditional;
+	(need_gnome_support): added `AC_SUBST(need_gnome_support)'.
+
+1998-06-07  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-guile-checks.m4 (GNOME_CHECK_GUILE): When
+	cross-compiling, we now check for `$host_alias-buile-guile'.
+
+1998-06-03  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-guile-checks.m4 (GNOME_CHECK_GUILE): Looks also
+	in $GNOME_LIBDIR; added failflag: GNOME_CHECK_GUILE(fail)
+	will abort if guile cannot be found.
+
+1998-05-23  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-sysdeps.m4 (GNOME_LIBGTOP_HOOK):
+	(libgtop_use_machine_h): Set this to true on SunOS.
+
+1998-05-22  Martin Baulig  <baulig@merkur.uni-trier.de>
+
+	* gnome-fileutils.m4 (GNOME_FILEUTILS_CHECKS): New file.
+	Imported from `configure.in' in GNU fileutils 3.16. It does
+	all the checks that are needed for the diskusage applet.
+
+1998-05-22  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-check.m4 (GNOME_LIBGTOP_HOOK): New file.
+	Checks whether libgtop is installed and reads its `libgtopConf.sh'
+	file if it can be found. Defines HAVE_LIBGTOP on success and
+	provides HAVE_LIBGTOP automake conditional.
+
+1998-05-21  Martin Baulig  <martin@home-of-linux.org>
+
+	* gnome-libgtop-sysdeps.m4 (GNOME_LIBGTOP_SYSDEPS): New file.
+	(libgtop_sysdeps_dir): sysdeps directory libgtop uses.
+	(libgtop_use_machine_h): define HAVE_GLIBTOP_MACHINE_H if this
+	is `yes'.
+	(libgtop_need_server): we only need the libgtop server, when
+	this has a value of `yes'. Defines NEED_LIBGTOP and NEED_LIBGTOP
+	automake conditional.
+
+1998-05-19  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-support.m4 (strerror): New check.
+	(sys_errlist): Check for this variable, needed for `strerror'.
+	(program_invocation_name, program_invocation_short_name): Change
+	method used to check for these.
+
+1998-05-09  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* autogen.sh: Remove simple-minded check for `gtk+'.
+
+Fri Apr 24 16:43:38 1998  Owen Taylor  <otaylor@gtk.org>
+
+	* autogen.sh: Pass the results of the environment variable
+	ACLOCAL_FLAGS to aclocal. This allows, for instance,
+
+	 ACLOCAL_FLAGS="-I /home/owen/share/aclocal/" autogen.sh
+	
+Sun Apr 19 01:35:53 EDT 1998 Gregory McLean <gregm@comstar.net>
+
+        * gnome-x-checks.m4: Updated the gtk check to check for 1.0.0.
+
+1998-04-08  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* autogen.sh: Update to list newer versions of packages.
+	* gnome-support.m4: Add `scandir' to AC_REPLACE_FUNCS.
+	Also run AC_HEADER_DIRENT.
+
+1998-03-31  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-support.m4 (AC_REPLACE_FUNCS): Look for vasprintf.
+
+Thu Mar 19 23:23:30 1998  Tom Tromey  <tromey@cygnus.com>
+
+	* gnome.m4: An empty true branch of an `if' statement is not valid
+	sh syntax.  If GNOME_INIT_HOOK argument $1 is empty, use ":"
+	instead.
+
+1998-03-19  Miguel de Icaza  <miguel@nuclecu.unam.mx>
+
+	* gnome.m4 (GNOME_INIT_HOOK): Provide a way to hook some code to
+	execute;  Accept a probe mode.
+	
+	(GNOME_INIT): Define in terms of GNOME_INIT_HOOK.
+
+Thu Mar 19 00:17:46 1998  Tom Tromey  <tromey@cygnus.com>
+
+	* gnome-support.m4: Cache results of check for
+	program_invocation_short_name, program_invocation_name.  Check to
+	make sure argp functions are in a library.
+
+	* gnome-support.m4: Cache results of argp check.
+
+Sun Mar 15 15:54:43 1998  Owen Taylor  <owt1@cornell.edu>
+
+	* gnome-x-checks.m4: Replaced checks for X and GTK
+	with AM_PATH_GTK. x_include, X_LIBS, etc, variables no longer
+	defined.
+
+1998-03-12  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-support.m4: Add a check for <linewrap.h> -- this enables
+	some optimizations when compiling `argp'.
+
+Mon Mar  9 19:32:42 1998  Tom Tromey  <tromey@cygnus.com>
+
+	* gnome-support.m4: Build vsnprintf.o, not vsnprint.o.
+
+1998-03-09  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-support.m4: Add check for `vsnprintf'.
+
+Sun Mar  8 17:04:28 1998  Tom Tromey  <tromey@cygnus.com>
+
+	* gnome-support.m4: Set need_gnome_support shell variable.  Define
+	BUILD_GNOME_SUPPORT automake conditional.  Define LTLIBOBJS.  Look
+	for argp_domain element in struct argp.
+
+Sat Mar  7 00:04:22 1998  Tom Tromey  <tromey@cygnus.com>
+
+	* gnome-support.m4 (GNOME_SUPPORT_CHECKS): Add argp-pvh.o to
+	LIBOBJS.
+
+	* gnome-support.m4 (GNOME_SUPPORT_CHECKS): Check for strnlen().
+
+Wed Mar  4 01:02:55 1998  Tom Tromey  <tromey@cygnus.com>
+
+	* gnome-support.m4 (GNOME_SUPPORT_CHECKS): Check for argp code,
+	strndup, program_invocation_name, program_invocation_short_name.
+
+Mon Mar  2 15:27:44 1998  Tom Tromey  <tromey@cygnus.com>
+
+	* gnome-x-checks.m4 (GNOME_X_CHECKS): Also check for SMlib.h; some
+	Solaris systems have -lSM but not SMlib.h.
+
+Sun Mar  1 17:49:42 1998  Tom Tromey  <tromey@cygnus.com>
+
+	* gnome.m4 (GNOME_INIT): Changed spacing so --help output looks
+	right.
+
+Fri Feb 27 10:05:34 1998  Tom Tromey  <tromey@cygnus.com>
+
+	* gnome-objc-checks.m4 (GNOME_CHECK_OBJC): Set OBJECTIVE_C shell
+	variable.
+
+1998-02-26  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-x-checks.m4 (CPPFLAGS): Put $X_CFLAGS here, not in
+	$CFLAGS. 
+	(GNOME_HAVE_SM): New var.  `true' if we have libSM, `false'
+	otherwise. 
+
+1998-02-19  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome.m4: Remove `GNOME_CHECK_GNOME'.
+
+1998-02-18  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-support.m4 (GNOME_SUPPORT_CHECKS): Replace `strcasecmp' if
+	necessary. 
+
+1998-02-15  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* Makefile.am (MACROS): Add `gnome-pthread-check.m4'.
+	* gnome-pthread-check.m4: New file.  Moved pthread check from
+	gnome-x-checks.m4 to here.
+	* gnome-objc-checks.m4: Use `gnome-pthread-check'.
+	(OBJC_LIBS): New config var.
+	* gnome-x-checks.m4: Add `AC_DEFINE(HAVE_LIBSM)' if `-lSM' is
+	already part of `$x_libs'.
+	Move pthread check to new file.
+	
+Sat Feb 14 12:45:35 1998  Tom Tromey  <tromey@cygnus.com>
+
+	* Makefile.am (macros.dep): Use single quotes, not double quotes.
+	Otherwise bash will interpret `$(...)' incorrectly.
+	(EXTRA_DIST): Include macros.dep in distribution.
+
+1998-02-14  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* Makefile.am (macros.dep): Put back doubled `$'.  We want the
+	expansion to occur in the including Makefile, not here.
+	Otherwise, there will be an extra `../' in the rule.
+
+Sat Feb 14 17:41:28 KST 1998  Changwoo Ryu  <cwryu@adam.kaist.ac.kr>
+
+	* autogen.sh: multilple aclocal -I directories.
+
+Sat Feb 14 01:09:37 1998  Tom Tromey  <tromey@cygnus.com>
+
+	* Makefile.am (macros.dep): Removed extra `$' from rule.
+
+	* gnome-x-checks.m4: Only check for -lSM if not already in
+	x_libs.
+
+1998-02-13  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* Makefile.am (EXTRA_DIST): Add `autogen.sh'.
+
+	* gnome-objc-checks.m4 (GNOME_INIT_OBJC): Solaris /bin/sh doesn't
+	understand `test -e'.
+
+	* autogen.sh: New file.
+
+	* gnome.m4 (GNOME_INIT): Look for gnomeConf.sh in $libdir, where
+	the installation actually installs it.
+
+	* Makefile.am (macros.dep): New maintainer rule for handling
+	automatic rebuilding of aclocal.m4 if any of the macros change.
+	(MACROS): New variable.  List of all `m4' macros in this
+	directory.
+
+1998-02-12  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome-support.m4: New file.  Defines GNOME_SUPPORT_CHECKS for
+	libsupport.a support.
+
+1998-02-10  Raja R Harinath  <harinath@cs.umn.edu>
+
+	* gnome.m4: New file.  Moved AC_CHECK_GNOME from `configure.in' to
+	here, and renamed macro to GNOME_CHECK_GNOME.
+	* gnome-x-checks.m4: Likewise, move and renaming AC_GNOME_X_CHECKS 
+	to GNOME_X_CHECKS.
+	
+	* aclocal-include.m4: New file.  Defines AM_ACLOCAL_INCLUDE macro
+	to provide extra search directories to `aclocal'.
+
+*Local Variables:
+*backup-inhibited: t
+*End:
diff -Nru gnome-print-0.25/macros/Makefile.am gnome-print-0.25.new/macros/Makefile.am
--- gnome-print-0.25/macros/Makefile.am	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/Makefile.am	Sun Nov  5 16:07:08 2000
@@ -0,0 +1,42 @@
+## Please update this variable if any new macros are created
+
+MACROS=						\
+  aclocal-include.m4				\
+  compiler-flags.m4				\
+  curses.m4					\
+  gnome-bonobo-check.m4				\
+  gnome-fileutils.m4				\
+  gnome-ghttp-check.m4				\
+  gnome-gnorba-check.m4				\
+  gnome-guile-checks.m4				\
+  gnome-libgtop-check.m4			\
+  gnome-objc-checks.m4				\
+  gnome-orbit-check.m4				\
+  gnome-print-check.m4				\
+  gnome-pthread-check.m4			\
+  gnome-support.m4				\
+  gnome-undelfs.m4				\
+  gnome-vfs.m4					\
+  gnome-x-checks.m4				\
+  gnome-xml-check.m4				\
+  gnome.m4					\
+  gperf-check.m4				\
+  linger.m4					\
+  need-declaration.m4
+
+EXTRA_DIST=$(MACROS) gnome-common.m4 gnome-gettext.m4 autogen.sh
+MAINTAINERCLEANFILES=macros.dep
+
+@MAINT@macros.dep: Makefile.am
+@MAINT@	@echo '$$(top_srcdir)/aclocal.m4: $(MACROS:%=macros/%)' > $@
+
+if INSIDE_GNOME_COMMON
+gnome_aclocaldir = $(datadir)/aclocal/gnome-macros
+
+gnome-macros.dep: Makefile.am
+	@echo '$$(top_srcdir)/aclocal.m4: $(MACROS:%=$(gnome_aclocaldir)/%)' > $@
+
+gnome_aclocal_DATA = $(MACROS) gnome-macros.dep gnome-common.m4 \
+	gnome-gettext.m4 autogen.sh
+
+endif
diff -Nru gnome-print-0.25/macros/Makefile.in gnome-print-0.25.new/macros/Makefile.in
--- gnome-print-0.25/macros/Makefile.in	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/Makefile.in	Fri Feb 16 00:32:12 2001
@@ -0,0 +1,302 @@
+# Makefile.in generated automatically by automake 1.4 from Makefile.am
+
+# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
+# This Makefile.in is free software; the Free Software Foundation
+# gives unlimited permission to copy and/or distribute it,
+# with or without modifications, as long as this notice is preserved.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
+# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
+# PARTICULAR PURPOSE.
+
+
+SHELL = @SHELL@
+
+srcdir = @srcdir@
+top_srcdir = @top_srcdir@
+VPATH = @srcdir@
+prefix = @prefix@
+exec_prefix = @exec_prefix@
+
+bindir = @bindir@
+sbindir = @sbindir@
+libexecdir = @libexecdir@
+datadir = @datadir@
+sysconfdir = @sysconfdir@
+sharedstatedir = @sharedstatedir@
+localstatedir = @localstatedir@
+libdir = @libdir@
+infodir = @infodir@
+mandir = @mandir@
+includedir = @includedir@
+oldincludedir = /usr/include
+
+DESTDIR =
+
+pkgdatadir = $(datadir)/@PACKAGE@
+pkglibdir = $(libdir)/@PACKAGE@
+pkgincludedir = $(includedir)/@PACKAGE@
+
+top_builddir = ..
+
+ACLOCAL = @ACLOCAL@
+AUTOCONF = @AUTOCONF@
+AUTOMAKE = @AUTOMAKE@
+AUTOHEADER = @AUTOHEADER@
+
+INSTALL = @INSTALL@
+INSTALL_PROGRAM = @INSTALL_PROGRAM@ $(AM_INSTALL_PROGRAM_FLAGS)
+INSTALL_DATA = @INSTALL_DATA@
+INSTALL_SCRIPT = @INSTALL_SCRIPT@
+transform = @program_transform_name@
+
+NORMAL_INSTALL = :
+PRE_INSTALL = :
+POST_INSTALL = :
+NORMAL_UNINSTALL = :
+PRE_UNINSTALL = :
+POST_UNINSTALL = :
+build_alias = @build_alias@
+build_triplet = @build@
+host_alias = @host_alias@
+host_triplet = @host@
+target_alias = @target_alias@
+target_triplet = @target@
+BUILD_GUILE = @BUILD_GUILE@
+CATALOGS = @CATALOGS@
+CATOBJEXT = @CATOBJEXT@
+CC = @CC@
+CFLAGS = @CFLAGS@
+CPP = @CPP@
+CPPFLAGS = @CPPFLAGS@
+CURSES_INCLUDEDIR = @CURSES_INCLUDEDIR@
+CURSES_LIBS = @CURSES_LIBS@
+CXX = @CXX@
+DATADIRNAME = @DATADIRNAME@
+GENCAT = @GENCAT@
+GLADE_FGLAGS = @GLADE_FGLAGS@
+GLADE_LIBS = @GLADE_LIBS@
+GMOFILES = @GMOFILES@
+GMSGFMT = @GMSGFMT@
+GNOMEGNORBA_LIBS = @GNOMEGNORBA_LIBS@
+GNOMEUI_LIBS = @GNOMEUI_LIBS@
+GNOME_APPLETS_LIBS = @GNOME_APPLETS_LIBS@
+GNOME_CAPPLET_LIBS = @GNOME_CAPPLET_LIBS@
+GNOME_CONFIG = @GNOME_CONFIG@
+GNOME_DOCKLETS_LIBS = @GNOME_DOCKLETS_LIBS@
+GNOME_INCLUDEDIR = @GNOME_INCLUDEDIR@
+GNOME_LIBDIR = @GNOME_LIBDIR@
+GNOME_LIBS = @GNOME_LIBS@
+GNOME_PRINT_CFLAGS = @GNOME_PRINT_CFLAGS@
+GNOME_PRINT_LIBS = @GNOME_PRINT_LIBS@
+GNOME_XML_CFLAGS = @GNOME_XML_CFLAGS@
+GNOME_XML_LIB = @GNOME_XML_LIB@
+GNORBA_CFLAGS = @GNORBA_CFLAGS@
+GNORBA_LIBS = @GNORBA_LIBS@
+GTKXMHTML_LIBS = @GTKXMHTML_LIBS@
+GTK_CFLAGS = @GTK_CFLAGS@
+GTK_CONFIG = @GTK_CONFIG@
+GTK_LIBS = @GTK_LIBS@
+GT_NO = @GT_NO@
+GT_YES = @GT_YES@
+GUILE_INCS = @GUILE_INCS@
+GUILE_LIBS = @GUILE_LIBS@
+HAVE_LIBXML = @HAVE_LIBXML@
+INCLUDE_LOCALE_H = @INCLUDE_LOCALE_H@
+INSTOBJEXT = @INSTOBJEXT@
+INTLDEPS = @INTLDEPS@
+INTLLIBS = @INTLLIBS@
+INTLOBJS = @INTLOBJS@
+LDFLAGS = @LDFLAGS@
+LEX = @LEX@
+LIBGTOP_BINARY_AGE = @LIBGTOP_BINARY_AGE@
+LIBGTOP_BINDIR = @LIBGTOP_BINDIR@
+LIBGTOP_CONFIG = @LIBGTOP_CONFIG@
+LIBGTOP_EXTRA_LIBS = @LIBGTOP_EXTRA_LIBS@
+LIBGTOP_INCLUDEDIR = @LIBGTOP_INCLUDEDIR@
+LIBGTOP_INCS = @LIBGTOP_INCS@
+LIBGTOP_INTERFACE_AGE = @LIBGTOP_INTERFACE_AGE@
+LIBGTOP_LIBDIR = @LIBGTOP_LIBDIR@
+LIBGTOP_LIBS = @LIBGTOP_LIBS@
+LIBGTOP_MAJOR_VERSION = @LIBGTOP_MAJOR_VERSION@
+LIBGTOP_MICRO_VERSION = @LIBGTOP_MICRO_VERSION@
+LIBGTOP_MINOR_VERSION = @LIBGTOP_MINOR_VERSION@
+LIBGTOP_NAMES_INCS = @LIBGTOP_NAMES_INCS@
+LIBGTOP_NAMES_LIBS = @LIBGTOP_NAMES_LIBS@
+LIBGTOP_SERVER = @LIBGTOP_SERVER@
+LIBGTOP_SERVER_VERSION = @LIBGTOP_SERVER_VERSION@
+LIBGTOP_VERSION = @LIBGTOP_VERSION@
+LIBGTOP_VERSION_CODE = @LIBGTOP_VERSION_CODE@
+LN_S = @LN_S@
+MAINT = @MAINT@
+MAKEINFO = @MAKEINFO@
+MKINSTALLDIRS = @MKINSTALLDIRS@
+OBGNOME_INCLUDEDIR = @OBGNOME_INCLUDEDIR@
+OBGNOME_LIBS = @OBGNOME_LIBS@
+OBGTK_LIBS = @OBGTK_LIBS@
+OBJC = @OBJC@
+OBJC_LIBS = @OBJC_LIBS@
+ORBIT_CFLAGS = @ORBIT_CFLAGS@
+ORBIT_CONFIG = @ORBIT_CONFIG@
+ORBIT_IDL = @ORBIT_IDL@
+ORBIT_LIBS = @ORBIT_LIBS@
+PACKAGE = @PACKAGE@
+PAM_LIBS = @PAM_LIBS@
+POFILES = @POFILES@
+POSUB = @POSUB@
+PTHREAD_LIB = @PTHREAD_LIB@
+QTTHREADS_LIB = @QTTHREADS_LIB@
+RANLIB = @RANLIB@
+READLINE_LIB = @READLINE_LIB@
+TERMCAP_LIB = @TERMCAP_LIB@
+USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
+USE_NLS = @USE_NLS@
+VERSION = @VERSION@
+XPM_LIBS = @XPM_LIBS@
+YACC = @YACC@
+ZVT_LIBS = @ZVT_LIBS@
+cflags_set = @cflags_set@
+cxxflags_set = @cxxflags_set@
+l = @l@
+
+MACROS =    aclocal-include.m4				  compiler-flags.m4				  curses.m4					  gnome-bonobo-check.m4				  gnome-fileutils.m4				  gnome-ghttp-check.m4				  gnome-gnorba-check.m4				  gnome-guile-checks.m4				  gnome-libgtop-check.m4			  gnome-objc-checks.m4				  gnome-orbit-check.m4				  gnome-print-check.m4				  gnome-pthread-check.m4			  gnome-support.m4				  gnome-undelfs.m4				  gnome-vfs.m4					  gnome-x-checks.m4				  gnome-xml-check.m4				  gnome.m4					  gperf-check.m4				  linger.m4					  need-declaration.m4
+
+
+EXTRA_DIST = $(MACROS) gnome-common.m4 gnome-gettext.m4 autogen.sh
+MAINTAINERCLEANFILES = macros.dep
+
+@INSIDE_GNOME_COMMON_TRUE@gnome_aclocaldir = $(datadir)/aclocal/gnome-macros
+
+@INSIDE_GNOME_COMMON_TRUE@gnome_aclocal_DATA = $(MACROS) gnome-macros.dep gnome-common.m4 	gnome-gettext.m4 autogen.sh
+mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = ../config.h
+CONFIG_CLEAN_FILES = 
+DATA =  $(gnome_aclocal_DATA)
+
+DIST_COMMON =  ChangeLog Makefile.am Makefile.in
+
+
+DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)
+
+TAR = gtar
+GZIP_ENV = --best
+all: all-redirect
+.SUFFIXES:
+$(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) 
+	cd $(top_srcdir) && $(AUTOMAKE) --gnu --include-deps macros/Makefile
+
+Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
+	cd $(top_builddir) \
+	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status
+
+
+install-gnome_aclocalDATA: $(gnome_aclocal_DATA)
+	@$(NORMAL_INSTALL)
+	$(mkinstalldirs) $(DESTDIR)$(gnome_aclocaldir)
+	@list='$(gnome_aclocal_DATA)'; for p in $$list; do \
+	  if test -f $(srcdir)/$$p; then \
+	    echo " $(INSTALL_DATA) $(srcdir)/$$p $(DESTDIR)$(gnome_aclocaldir)/$$p"; \
+	    $(INSTALL_DATA) $(srcdir)/$$p $(DESTDIR)$(gnome_aclocaldir)/$$p; \
+	  else if test -f $$p; then \
+	    echo " $(INSTALL_DATA) $$p $(DESTDIR)$(gnome_aclocaldir)/$$p"; \
+	    $(INSTALL_DATA) $$p $(DESTDIR)$(gnome_aclocaldir)/$$p; \
+	  fi; fi; \
+	done
+
+uninstall-gnome_aclocalDATA:
+	@$(NORMAL_UNINSTALL)
+	list='$(gnome_aclocal_DATA)'; for p in $$list; do \
+	  rm -f $(DESTDIR)$(gnome_aclocaldir)/$$p; \
+	done
+tags: TAGS
+TAGS:
+
+
+distdir = $(top_builddir)/$(PACKAGE)-$(VERSION)/$(subdir)
+
+subdir = macros
+
+distdir: $(DISTFILES)
+	@for file in $(DISTFILES); do \
+	  d=$(srcdir); \
+	  if test -d $$d/$$file; then \
+	    cp -pr $$d/$$file $(distdir)/$$file; \
+	  else \
+	    test -f $(distdir)/$$file \
+	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
+	    || cp -p $$d/$$file $(distdir)/$$file || :; \
+	  fi; \
+	done
+info-am:
+info: info-am
+dvi-am:
+dvi: dvi-am
+check-am: all-am
+check: check-am
+installcheck-am:
+installcheck: installcheck-am
+install-exec-am:
+install-exec: install-exec-am
+
+install-data-am: install-gnome_aclocalDATA
+install-data: install-data-am
+
+install-am: all-am
+	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am
+install: install-am
+uninstall-am: uninstall-gnome_aclocalDATA
+uninstall: uninstall-am
+all-am: Makefile $(DATA)
+all-redirect: all-am
+install-strip:
+	$(MAKE) $(AM_MAKEFLAGS) AM_INSTALL_PROGRAM_FLAGS=-s install
+installdirs:
+	$(mkinstalldirs)  $(DESTDIR)$(gnome_aclocaldir)
+
+
+mostlyclean-generic:
+
+clean-generic:
+
+distclean-generic:
+	-rm -f Makefile $(CONFIG_CLEAN_FILES)
+	-rm -f config.cache config.log stamp-h stamp-h[0-9]*
+
+maintainer-clean-generic:
+	-test -z "$(MAINTAINERCLEANFILES)" || rm -f $(MAINTAINERCLEANFILES)
+mostlyclean-am:  mostlyclean-generic
+
+mostlyclean: mostlyclean-am
+
+clean-am:  clean-generic mostlyclean-am
+
+clean: clean-am
+
+distclean-am:  distclean-generic clean-am
+
+distclean: distclean-am
+
+maintainer-clean-am:  maintainer-clean-generic distclean-am
+	@echo "This command is intended for maintainers to use;"
+	@echo "it deletes files that may require special tools to rebuild."
+
+maintainer-clean: maintainer-clean-am
+
+.PHONY: uninstall-gnome_aclocalDATA install-gnome_aclocalDATA tags \
+distdir info-am info dvi-am dvi check check-am installcheck-am \
+installcheck install-exec-am install-exec install-data-am install-data \
+install-am install uninstall-am uninstall all-redirect all-am all \
+installdirs mostlyclean-generic distclean-generic clean-generic \
+maintainer-clean-generic clean mostlyclean distclean maintainer-clean
+
+
+@MAINT@macros.dep: Makefile.am
+@MAINT@	@echo '$$(top_srcdir)/aclocal.m4: $(MACROS:%=macros/%)' > $@
+
+@INSIDE_GNOME_COMMON_TRUE@gnome-macros.dep: Makefile.am
+@INSIDE_GNOME_COMMON_TRUE@	@echo '$$(top_srcdir)/aclocal.m4: $(MACROS:%=$(gnome_aclocaldir)/%)' > $@
+
+# Tell versions [3.59,3.63) of GNU make to not export all variables.
+# Otherwise a system limit (for SysV at least) may be exceeded.
+.NOEXPORT:
diff -Nru gnome-print-0.25/macros/aclocal-include.m4 gnome-print-0.25.new/macros/aclocal-include.m4
--- gnome-print-0.25/macros/aclocal-include.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/aclocal-include.m4	Thu Aug  3 00:26:45 2000
@@ -0,0 +1,16 @@
+# aclocal-include.m4
+# 
+# This macro adds the name macrodir to the set of directories
+# that `aclocal' searches for macros.  
+
+# serial 1
+
+dnl AM_ACLOCAL_INCLUDE(macrodir)
+AC_DEFUN([AM_ACLOCAL_INCLUDE],
+[
+	AM_CONDITIONAL(INSIDE_GNOME_COMMON, test x = y)
+
+	test -n "$ACLOCAL_FLAGS" && ACLOCAL="$ACLOCAL $ACLOCAL_FLAGS"
+
+	for k in $1 ; do ACLOCAL="$ACLOCAL -I $k" ; done
+])
diff -Nru gnome-print-0.25/macros/autogen.sh gnome-print-0.25.new/macros/autogen.sh
--- gnome-print-0.25/macros/autogen.sh	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/autogen.sh	Sun Feb  4 05:10:39 2001
@@ -0,0 +1,193 @@
+#!/bin/sh
+# Run this to generate all the initial makefiles, etc.
+
+DIE=0
+
+if [ -n "$GNOME2_PATH" ]; then
+	ACLOCAL_FLAGS="-I $GNOME2_PATH/share/aclocal $ACLOCAL_FLAGS"
+	PATH="$GNOME2_PATH/bin:$PATH"
+	export PATH
+fi
+
+(autoconf --version) < /dev/null > /dev/null 2>&1 || {
+  echo
+  echo "**Error**: You must have \`autoconf' installed to compile Gnome."
+  echo "Download the appropriate package for your distribution,"
+  echo "or get the source tarball at ftp://ftp.gnu.org/pub/gnu/"
+  DIE=1
+}
+
+(grep "^AM_PROG_XML_I18N_TOOLS" $srcdir/configure.in >/dev/null) && {
+  (xml-i18n-toolize --version) < /dev/null > /dev/null 2>&1 || {
+    echo 
+    echo "**Error**: You must have \`xml-i18n-toolize' installed to compile Gnome."
+    echo "Get ftp://ftp.gnome.org/pub/GNOME/stable/sources/xml-i18n-tools/xml-i18n-tools-0.6.tar.gz"
+    echo "(or a newer version if it is available)"
+    DIE=1
+  }
+}
+
+(grep "^AM_PROG_LIBTOOL" $srcdir/configure.in >/dev/null) && {
+  (libtool --version) < /dev/null > /dev/null 2>&1 || {
+    echo
+    echo "**Error**: You must have \`libtool' installed to compile Gnome."
+    echo "Get ftp://ftp.gnu.org/pub/gnu/libtool-1.2d.tar.gz"
+    echo "(or a newer version if it is available)"
+    DIE=1
+  }
+}
+
+#grep "^AM_GNU_GETTEXT" $srcdir/configure.in >/dev/null && {
+#  grep "sed.*POTFILES" $srcdir/configure.in >/dev/null || \
+#  (gettext --version) < /dev/null > /dev/null 2>&1 || {
+#    echo
+#    echo "**Error**: You must have \`gettext' installed to compile Gnome."
+#    echo "Get ftp://alpha.gnu.org/gnu/gettext-0.10.35.tar.gz"
+#    echo "(or a newer version if it is available)"
+#    DIE=1
+#  }
+#}
+
+#grep "^AM_GNOME_GETTEXT" $srcdir/configure.in >/dev/null && {
+#  grep "sed.*POTFILES" $srcdir/configure.in >/dev/null || \
+#  (gettext --version) < /dev/null > /dev/null 2>&1 || {
+#    echo
+#    echo "**Error**: You must have \`gettext' installed to compile Gnome."
+#    echo "Get ftp://alpha.gnu.org/gnu/gettext-0.10.35.tar.gz"
+#    echo "(or a newer version if it is available)"
+#    DIE=1
+#  }
+#}
+
+(automake --version) < /dev/null > /dev/null 2>&1 || {
+  echo
+  echo "**Error**: You must have \`automake' installed to compile Gnome."
+  echo "Get ftp://ftp.gnu.org/pub/gnu/automake-1.3.tar.gz"
+  echo "(or a newer version if it is available)"
+  DIE=1
+  NO_AUTOMAKE=yes
+}
+
+
+# if no automake, don't bother testing for aclocal
+test -n "$NO_AUTOMAKE" || (aclocal --version) < /dev/null > /dev/null 2>&1 || {
+  echo
+  echo "**Error**: Missing \`aclocal'.  The version of \`automake'"
+  echo "installed doesn't appear recent enough."
+  echo "Get ftp://ftp.gnu.org/pub/gnu/automake-1.3.tar.gz"
+  echo "(or a newer version if it is available)"
+  DIE=1
+}
+
+if test "$DIE" -eq 1; then
+  exit 1
+fi
+
+if test -z "$*"; then
+  echo "**Warning**: I am going to run \`configure' with no arguments."
+  echo "If you wish to pass any to it, please specify them on the"
+  echo \`$0\'" command line."
+  echo
+fi
+
+case $CC in
+xlc )
+  am_opt=--include-deps;;
+esac
+
+for coin in `find $srcdir -name configure.in -print`
+do 
+  dr=`dirname $coin`
+  if test -f $dr/NO-AUTO-GEN; then
+    echo skipping $dr -- flagged as no auto-gen
+  else
+    echo processing $dr
+    macrodirs=`sed -n -e 's,AM_ACLOCAL_INCLUDE(\(.*\)),\1,gp' < $coin`
+    ( cd $dr
+      macrosdir=`find . -name macros -print`
+      for i in $macrodirs; do
+	if test -f $i/gnome-gettext.m4; then
+	  DELETEFILES="$DELETEFILES $i/gnome-gettext.m4"
+	fi
+      done
+
+      echo "deletefiles is $DELETEFILES"
+      aclocalinclude="$ACLOCAL_FLAGS"
+      for k in $aclocalinclude; do
+  	if test -d $k; then
+	  if [ -f $k/gnome.m4 -a "$GNOME_INTERFACE_VERSION" = "1" ]; then
+	    rm -f $DELETEFILES
+	  fi
+        fi
+      done
+      for k in $macrodirs; do
+  	if test -d $k; then
+          aclocalinclude="$aclocalinclude -I $k"
+	  if [ -f $k/gnome.m4 -a "$GNOME_INTERFACE_VERSION" = "1" ]; then
+	    rm -f $DELETEFILES
+	  fi
+        fi
+      done
+      if grep "^AM_GNU_GETTEXT" configure.in >/dev/null; then
+	if grep "sed.*POTFILES" configure.in >/dev/null; then
+	  : do nothing -- we still have an old unmodified configure.in
+	else
+	  echo "Creating $dr/aclocal.m4 ..."
+	  test -r $dr/aclocal.m4 || touch $dr/aclocal.m4
+	  echo "Running gettextize...  Ignore non-fatal messages."
+	  echo "no" | gettextize --force --copy
+	  echo "Making $dr/aclocal.m4 writable ..."
+	  test -r $dr/aclocal.m4 && chmod u+w $dr/aclocal.m4
+        fi
+      fi
+      if grep "^AM_GNOME_GETTEXT" configure.in >/dev/null; then
+	echo "Creating $dr/aclocal.m4 ..."
+	test -r $dr/aclocal.m4 || touch $dr/aclocal.m4
+	echo "Running gettextize...  Ignore non-fatal messages."
+	echo "no" | gettextize --force --copy
+	echo "Making $dr/aclocal.m4 writable ..."
+	test -r $dr/aclocal.m4 && chmod u+w $dr/aclocal.m4
+      fi
+      if grep "^AM_PROG_XML_I18N_TOOLS" configure.in >/dev/null; then
+        echo "Running xml-i18n-toolize... Ignore non-fatal messages."
+	xml-i18n-toolize --copy --force --automake
+      fi
+      if grep "^AM_PROG_LIBTOOL" configure.in >/dev/null; then
+	if test -z "$NO_LIBTOOLIZE" ; then 
+	  echo "Running libtoolize..."
+	  libtoolize --force --copy
+	fi
+      fi
+      echo "Running aclocal $aclocalinclude ..."
+      aclocal $aclocalinclude || {
+	echo
+	echo "**Error**: aclocal failed. This may mean that you have not"
+	echo "installed all of the packages you need, or you may need to"
+	echo "set ACLOCAL_FLAGS to include \"-I \$prefix/share/aclocal\""
+	echo "for the prefix where you installed the packages whose"
+	echo "macros were not found"
+	exit 1
+      }
+
+      if grep "^AM_CONFIG_HEADER" configure.in >/dev/null; then
+	echo "Running autoheader..."
+	autoheader || { echo "**Error**: autoheader failed."; exit 1; }
+      fi
+      echo "Running automake --gnu $am_opt ..."
+      automake --add-missing --gnu $am_opt ||
+	{ echo "**Error**: automake failed."; exit 1; }
+      echo "Running autoconf ..."
+      autoconf || { echo "**Error**: autoconf failed."; exit 1; }
+    ) || exit 1
+  fi
+done
+
+conf_flags="--enable-maintainer-mode --enable-compile-warnings" #--enable-iso-c
+
+if test x$NOCONFIGURE = x; then
+  echo Running $srcdir/configure $conf_flags "$@" ...
+  $srcdir/configure $conf_flags "$@" \
+  && echo Now type \`make\' to compile $PKG_NAME || exit 1
+else
+  echo Skipping configure process.
+fi
diff -Nru gnome-print-0.25/macros/compiler-flags.m4 gnome-print-0.25.new/macros/compiler-flags.m4
--- gnome-print-0.25/macros/compiler-flags.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/compiler-flags.m4	Thu Aug  3 00:26:45 2000
@@ -0,0 +1,109 @@
+dnl GNOME_COMPILE_WARNINGS
+dnl Turn on many useful compiler warnings
+dnl For now, only works on GCC
+AC_DEFUN([GNOME_COMPILE_WARNINGS],[
+  AC_ARG_ENABLE(compile-warnings, 
+    [  --enable-compile-warnings=[no/minimum/yes]	Turn on compiler warnings.],,enable_compile_warnings=minimum)
+
+  AC_MSG_CHECKING(what warning flags to pass to the C compiler)
+  warnCFLAGS=
+  if test "x$GCC" != xyes; then
+    enable_compile_warnings=no
+  fi
+
+  if test "x$enable_compile_warnings" != "xno"; then
+    if test "x$GCC" = "xyes"; then
+      case " $CFLAGS " in
+      *[\ \	]-Wall[\ \	]*) ;;
+      *) warnCFLAGS="-Wall -Wunused" ;;
+      esac
+
+      ## -W is not all that useful.  And it cannot be controlled
+      ## with individual -Wno-xxx flags, unlike -Wall
+      if test "x$enable_compile_warnings" = "xyes"; then
+	warnCFLAGS="$warnCFLAGS -Wmissing-prototypes -Wmissing-declarations"
+      fi
+    fi
+  fi
+  AC_MSG_RESULT($warnCFLAGS)
+
+  AC_ARG_ENABLE(iso-c,
+    [  --enable-iso-c          Try to warn if code is not ISO C ],,
+    enable_iso_c=no)
+
+  AC_MSG_CHECKING(what language compliance flags to pass to the C compiler)
+  complCFLAGS=
+  if test "x$enable_iso_c" != "xno"; then
+    if test "x$GCC" = "xyes"; then
+      case " $CFLAGS " in
+      *[\ \	]-ansi[\ \	]*) ;;
+      *) complCFLAGS="$complCFLAGS -ansi" ;;
+      esac
+
+      case " $CFLAGS " in
+      *[\ \	]-pedantic[\ \	]*) ;;
+      *) complCFLAGS="$complCFLAGS -pedantic" ;;
+      esac
+    fi
+  fi
+  AC_MSG_RESULT($complCFLAGS)
+  if test "x$cflags_set" != "xyes"; then
+    CFLAGS="$CFLAGS $warnCFLAGS $complCFLAGS"
+    cflags_set=yes
+    AC_SUBST(cflags_set)
+  fi
+])
+
+dnl For C++, do basically the same thing.
+
+AC_DEFUN([GNOME_CXX_WARNINGS],[
+  AC_ARG_ENABLE(cxx-warnings, 
+    [  --enable-cxx-warnings=[no/minimum/yes]	Turn on compiler warnings.],,enable_cxx_warnings=minimum)
+
+  AC_MSG_CHECKING(what warning flags to pass to the C++ compiler)
+  warnCXXFLAGS=
+  if test "x$GCC" != xyes; then
+    enable_compile_warnings=no
+  fi
+  if test "x$enable_cxx_warnings" != "xno"; then
+    if test "x$GCC" = "xyes"; then
+      case " $CXXFLAGS " in
+      *[\ \	]-Wall[\ \	]*) ;;
+      *) warnCXXFLAGS="-Wall -Wno-unused" ;;
+      esac
+
+      ## -W is not all that useful.  And it cannot be controlled
+      ## with individual -Wno-xxx flags, unlike -Wall
+      if test "x$enable_cxx_warnings" = "xyes"; then
+	warnCXXFLAGS="$warnCXXFLAGS -Wmissing-prototypes -Wmissing-declarations -Wshadow -Woverloaded-virtual"
+      fi
+    fi
+  fi
+  AC_MSG_RESULT($warnCXXFLAGS)
+
+   AC_ARG_ENABLE(iso-cxx,
+     [  --enable-iso-cxx          Try to warn if code is not ISO C++ ],,
+     enable_iso_cxx=no)
+
+   AC_MSG_CHECKING(what language compliance flags to pass to the C++ compiler)
+   complCXXFLAGS=
+   if test "x$enable_iso_cxx" != "xno"; then
+     if test "x$GCC" = "xyes"; then
+      case " $CXXFLAGS " in
+      *[\ \	]-ansi[\ \	]*) ;;
+      *) complCXXFLAGS="$complCXXFLAGS -ansi" ;;
+      esac
+
+      case " $CXXFLAGS " in
+      *[\ \	]-pedantic[\ \	]*) ;;
+      *) complCXXFLAGS="$complCXXFLAGS -pedantic" ;;
+      esac
+     fi
+   fi
+  AC_MSG_RESULT($complCXXFLAGS)
+  if test "x$cxxflags_set" != "xyes"; then
+    CXXFLAGS="$CXXFLAGS $warnCXXFLAGS $complCXXFLAGS"
+    cxxflags_set=yes
+    AC_SUBST(cxxflags_set)
+  fi
+])
diff -Nru gnome-print-0.25/macros/curses.m4 gnome-print-0.25.new/macros/curses.m4
--- gnome-print-0.25/macros/curses.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/curses.m4	Wed Feb  7 22:33:01 2001
@@ -0,0 +1,318 @@
+dnl Curses detection: Munged from Midnight Commander's configure.in
+dnl
+dnl What it does:
+dnl =============
+dnl
+dnl - Determine which version of curses is installed on your system
+dnl   and set the -I/-L/-l compiler entries and add a few preprocessor
+dnl   symbols 
+dnl - Do an AC_SUBST on the CURSES_INCLUDEDIR and CURSES_LIBS so that
+dnl   @CURSES_INCLUDEDIR@ and @CURSES_LIBS@ will be available in
+dnl   Makefile.in's
+dnl - Modify the following configure variables (these are the only
+dnl   curses.m4 variables you can access from within configure.in)
+dnl   CURSES_INCLUDEDIR - contains -I's and possibly -DRENAMED_CURSES if
+dnl                       an ncurses.h that's been renamed to curses.h
+dnl                       is found.
+dnl   CURSES_LIBS       - sets -L and -l's appropriately
+dnl   CFLAGS            - if --with-sco, add -D_SVID3 
+dnl   has_curses        - exports result of tests to rest of configure
+dnl
+dnl Usage:
+dnl ======
+dnl 1) Add lines indicated below to acconfig.h
+dnl 2) call AC_CHECK_CURSES after AC_PROG_CC in your configure.in
+dnl 3) Instead of #include <curses.h> you should use the following to
+dnl    properly locate ncurses or curses header file
+dnl
+dnl    #if defined(USE_NCURSES) && !defined(RENAMED_NCURSES)
+dnl    #include <ncurses.h>
+dnl    #else
+dnl    #include <curses.h>
+dnl    #endif
+dnl
+dnl 4) Make sure to add @CURSES_INCLUDEDIR@ to your preprocessor flags
+dnl 5) Make sure to add @CURSES_LIBS@ to your linker flags or LIBS
+dnl
+dnl Notes with automake:
+dnl - call AM_CONDITIONAL(HAS_CURSES, test "$has_curses" = true) from
+dnl   configure.in
+dnl - your Makefile.am can look something like this
+dnl   -----------------------------------------------
+dnl   INCLUDES= blah blah blah $(CURSES_INCLUDEDIR) 
+dnl   if HAS_CURSES
+dnl   CURSES_TARGETS=name_of_curses_prog
+dnl   endif
+dnl   bin_PROGRAMS = other_programs $(CURSES_TARGETS)
+dnl   other_programs_SOURCES = blah blah blah
+dnl   name_of_curses_prog_SOURCES = blah blah blah
+dnl   other_programs_LDADD = blah
+dnl   name_of_curses_prog_LDADD = blah $(CURSES_LIBS)
+dnl   -----------------------------------------------
+dnl
+dnl
+dnl The following lines should be added to acconfig.h:
+dnl ==================================================
+dnl
+dnl /*=== Curses version detection defines ===*/
+dnl /* Found some version of curses that we're going to use */
+dnl #undef HAS_CURSES
+dnl    
+dnl /* Use SunOS SysV curses? */
+dnl #undef USE_SUNOS_CURSES
+dnl 
+dnl /* Use old BSD curses - not used right now */
+dnl #undef USE_BSD_CURSES
+dnl 
+dnl /* Use SystemV curses? */
+dnl #undef USE_SYSV_CURSES
+dnl 
+dnl /* Use Ncurses? */
+dnl #undef USE_NCURSES
+dnl 
+dnl /* If you Curses does not have color define this one */
+dnl #undef NO_COLOR_CURSES
+dnl 
+dnl /* Define if you want to turn on SCO-specific code */
+dnl #undef SCO_FLAVOR
+dnl 
+dnl /* Set to reflect version of ncurses *
+dnl  *   0 = version 1.*
+dnl  *   1 = version 1.9.9g
+dnl  *   2 = version 4.0/4.1 */
+dnl #undef NCURSES_970530
+dnl
+dnl /*=== End new stuff for acconfig.h ===*/
+dnl 
+
+
+AC_DEFUN([AC_CHECK_CURSES],[
+	search_ncurses=true
+	screen_manager=""
+	has_curses=false
+
+	CFLAGS=${CFLAGS--O}
+
+	AC_SUBST(CURSES_LIBS)
+	AC_SUBST(CURSES_INCLUDEDIR)
+
+	AC_ARG_WITH(sco,
+	  [  --with-sco              Use this to turn on SCO-specific code],[
+	  if test x$withval = xyes; then
+		AC_DEFINE(SCO_FLAVOR)
+		CFLAGS="$CFLAGS -D_SVID3"
+	  fi
+	])
+
+	AC_ARG_WITH(sunos-curses,
+	  [  --with-sunos-curses     Used to force SunOS 4.x curses],[
+	  if test x$withval = xyes; then
+		AC_USE_SUNOS_CURSES
+	  fi
+	])
+
+	AC_ARG_WITH(osf1-curses,
+	  [  --with-osf1-curses      Used to force OSF/1 curses],[
+	  if test x$withval = xyes; then
+		AC_USE_OSF1_CURSES
+	  fi
+	])
+
+	AC_ARG_WITH(vcurses,
+	  [  --with-vcurses[=incdir] Used to force SysV curses],
+	  if test x$withval != xyes; then
+		CURSES_INCLUDEDIR="-I$withval"
+	  fi
+	  AC_USE_SYSV_CURSES
+	)
+
+	AC_ARG_WITH(ncurses,
+	  [  --with-ncurses[=dir]  Compile with ncurses/locate base dir],
+	  if test x$withval = xno ; then
+		search_ncurses=false
+	  elif test x$withval != xyes ; then
+		CURSES_LIBS="$LIBS -L$withval/lib -lncurses"
+		CURSES_INCLUDEDIR="-I$withval/include"
+		search_ncurses=false
+		screen_manager="ncurses"
+		AC_DEFINE(USE_NCURSES)
+		AC_DEFINE(HAS_CURSES)
+		has_curses=true
+	  fi
+	)
+
+	if $search_ncurses
+	then
+		AC_SEARCH_NCURSES()
+	fi
+
+
+])
+
+
+AC_DEFUN([AC_USE_SUNOS_CURSES], [
+	search_ncurses=false
+	screen_manager="SunOS 4.x /usr/5include curses"
+	AC_MSG_RESULT(Using SunOS 4.x /usr/5include curses)
+	AC_DEFINE(USE_SUNOS_CURSES)
+	AC_DEFINE(HAS_CURSES)
+	has_curses=true
+	AC_DEFINE(NO_COLOR_CURSES)
+	AC_DEFINE(USE_SYSV_CURSES)
+	CURSES_INCLUDEDIR="-I/usr/5include"
+	CURSES_LIBS="/usr/5lib/libcurses.a /usr/5lib/libtermcap.a"
+	AC_MSG_RESULT(Please note that some screen refreshs may fail)
+])
+
+AC_DEFUN([AC_USE_OSF1_CURSES], [
+       AC_MSG_RESULT(Using OSF1 curses)
+       search_ncurses=false
+       screen_manager="OSF1 curses"
+       AC_DEFINE(HAS_CURSES)
+       has_curses=true
+       AC_DEFINE(NO_COLOR_CURSES)
+       AC_DEFINE(USE_SYSV_CURSES)
+       CURSES_LIBS="-lcurses"
+])
+
+AC_DEFUN([AC_USE_SYSV_CURSES], [
+	AC_MSG_RESULT(Using SysV curses)
+	AC_DEFINE(HAS_CURSES)
+	has_curses=true
+	AC_DEFINE(USE_SYSV_CURSES)
+	search_ncurses=false
+	screen_manager="SysV/curses"
+	CURSES_LIBS="-lcurses"
+])
+
+dnl AC_ARG_WITH(bsd-curses,
+dnl [--with-bsd-curses         Used to compile with bsd curses, not very fancy],
+dnl 	search_ncurses=false
+dnl	screen_manager="Ultrix/cursesX"
+dnl	if test $system = ULTRIX
+dnl	then
+dnl	    THIS_CURSES=cursesX
+dnl        else
+dnl	    THIS_CURSES=curses
+dnl	fi
+dnl
+dnl	CURSES_LIBS="-l$THIS_CURSES -ltermcap"
+dnl	AC_DEFINE(HAS_CURSES)
+dnl	has_curses=true
+dnl	AC_DEFINE(USE_BSD_CURSES)
+dnl	AC_MSG_RESULT(Please note that some screen refreshs may fail)
+dnl	AC_MSG_WARN(Use of the bsdcurses extension has some)
+dnl	AC_MSG_WARN(display/input problems.)
+dnl	AC_MSG_WARN(Reconsider using xcurses)
+dnl)
+
+	
+dnl
+dnl Parameters: directory filename cureses_LIBS curses_INCLUDEDIR nicename
+dnl
+AC_DEFUN([AC_NCURSES], [
+    if $search_ncurses
+    then
+        if test -f $1/$2
+	then
+	    AC_MSG_RESULT(Found ncurses on $1/$2)
+ 	    CURSES_LIBS="$3"
+	    CURSES_INCLUDEDIR="$4"
+	    search_ncurses=false
+	    screen_manager=$5
+            AC_DEFINE(HAS_CURSES)
+            has_curses=true
+	    AC_DEFINE(USE_NCURSES)
+	fi
+    fi
+])
+
+AC_DEFUN([AC_SEARCH_NCURSES], [
+    AC_CHECKING("location of ncurses.h file")
+
+    AC_NCURSES(/usr/include, ncurses.h, -lncurses,, "ncurses on /usr/include")
+    AC_NCURSES(/usr/include/ncurses, ncurses.h, -lncurses, -I/usr/include/ncurses, "ncurses on /usr/include/ncurses")
+    AC_NCURSES(/usr/local/include, ncurses.h, -L/usr/local/lib -lncurses, -I/usr/local/include, "ncurses on /usr/local")
+    AC_NCURSES(/usr/local/include/ncurses, ncurses.h, -L/usr/local/lib -L/usr/local/lib/ncurses -lncurses, -I/usr/local/include/ncurses, "ncurses on /usr/local/include/ncurses")
+
+    AC_NCURSES(/usr/local/include/ncurses, curses.h, -L/usr/local/lib -lncurses, -I/usr/local/include/ncurses -DRENAMED_NCURSES, "renamed ncurses on /usr/local/.../ncurses")
+
+    AC_NCURSES(/usr/include/ncurses, curses.h, -lncurses, -I/usr/include/ncurses -DRENAMED_NCURSES, "renamed ncurses on /usr/include/ncurses")
+
+    dnl
+    dnl We couldn't find ncurses, try SysV curses
+    dnl
+    if $search_ncurses 
+    then
+        AC_EGREP_HEADER(init_color, /usr/include/curses.h,
+	    AC_USE_SYSV_CURSES)
+	AC_EGREP_CPP(USE_NCURSES,[
+#include <curses.h>
+#ifdef __NCURSES_H
+#undef USE_NCURSES
+USE_NCURSES
+#endif
+],[
+	CURSES_INCLUDEDIR="$CURSES_INCLUDEDIR -DRENAMED_NCURSES"
+        AC_DEFINE(HAS_CURSES)
+	has_curses=true
+        AC_DEFINE(USE_NCURSES)
+        search_ncurses=false
+        screen_manager="ncurses installed as curses"
+])
+    fi
+
+    dnl
+    dnl Try SunOS 4.x /usr/5{lib,include} ncurses
+    dnl The flags USE_SUNOS_CURSES, USE_BSD_CURSES and BUGGY_CURSES
+    dnl should be replaced by a more fine grained selection routine
+    dnl
+    if $search_ncurses
+    then
+	if test -f /usr/5include/curses.h
+	then
+	    AC_USE_SUNOS_CURSES
+        fi
+    else
+        # check for ncurses version, to properly ifdef mouse-fix
+	AC_MSG_CHECKING(for ncurses version)
+	ncurses_version=unknown
+cat > conftest.$ac_ext <<EOF
+[#]line __oline__ "configure"
+#include "confdefs.h"
+#ifdef RENAMED_NCURSES
+#include <curses.h>
+#else
+#include <ncurses.h>
+#endif
+#undef VERSION
+VERSION:NCURSES_VERSION
+EOF
+        if (eval "$ac_cpp conftest.$ac_ext") 2>&AC_FD_CC |
+  egrep "VERSION:" >conftest.out 2>&1; then
+changequote(,)dnl
+            ncurses_version=`cat conftest.out|sed -e 's/^[^"]*"//' -e 's/".*//'`
+changequote([,])dnl
+	fi
+	rm -rf conftest*
+        AC_MSG_RESULT($ncurses_version)
+	case "$ncurses_version" in
+changequote(,)dnl
+	4.[01])
+changequote([,])dnl
+            AC_DEFINE(NCURSES_970530,2)
+            ;;
+	1.9.9g)
+            AC_DEFINE(NCURSES_970530,1)
+            ;;
+	1*)
+            AC_DEFINE(NCURSES_970530,0)
+            ;;
+	esac
+    fi
+])
+
+
+
+
+
diff -Nru gnome-print-0.25/macros/gnome-bonobo-check.m4 gnome-print-0.25.new/macros/gnome-bonobo-check.m4
--- gnome-print-0.25/macros/gnome-bonobo-check.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-bonobo-check.m4	Sun Nov  5 16:08:14 2000
@@ -0,0 +1,166 @@
+# Configure paths for Bonobo
+# Miguel de Icaza, 99-04-12
+# Stolen from Chris Lahey	99-2-5
+# stolen from Manish Singh again
+# stolen back from Frank Belew
+# stolen from Manish Singh
+# Shamelessly stolen from Owen Taylor
+
+dnl AM_PATH_BONOBO ([MINIMUM-VERSION, [ACTION-IF-FOUND [, ACTION-IF-NOT-FOUND]]])
+dnl Test for Bonobo, and define BONOBO_CFLAGS and BONOBO_LIBS
+dnl
+AC_DEFUN([AM_PATH_BONOBO],
+[
+dnl 
+dnl Get the cflags and libraries from the gnome-config script
+dnl
+AC_ARG_WITH(bonobo-prefix,[  --with-bonobo-prefix=PFX   Prefix where Bonobo is installed (optional)],
+            bonobo_prefix="$withval", bonobo_prefix="")
+AC_ARG_WITH(bonobo-exec-prefix,[  --with-bonobo-exec-prefix=PFX Exec prefix where Bonobo is installed (optional)],
+            bonobo_exec_prefix="$withval", bonobo_exec_prefix="")
+AC_ARG_ENABLE(bonobotest, [  --disable-bonobotest       Do not try to compile and run a test Bonobo program],
+		    , enable_bonobotest=yes)
+
+  if test x$bonobo_exec_prefix != x ; then
+     bonobo_args="$bonobo_args --exec-prefix=$bonobo_exec_prefix"
+     if test x${GNOME_CONFIG+set} != xset ; then
+        GNOME_CONFIG=$bonobo_exec_prefix/bin/gnome-config
+     fi
+  fi
+  if test x$bonobo_prefix != x ; then
+     bonobo_args="$bonobo_args --prefix=$bonobo_prefix"
+     if test x${GNOME_CONFIG+set} != xset ; then
+        GNOME_CONFIG=$bonobo_prefix/bin/gnome-config
+     fi
+  fi
+
+  AC_PATH_PROG(GNOME_CONFIG, gnome-config, no)
+  min_bonobo_version=ifelse([$1], ,0.1.0,$1)
+  AC_MSG_CHECKING(for BONOBO - version >= $min_bonobo_version)
+  no_bonobo=""
+  if test "$GNOME_CONFIG" = "no" ; then
+    no_bonobo=yes
+  else
+    BONOBO_CFLAGS=`$GNOME_CONFIG $bonoboconf_args --cflags bonobo bonobox`
+    BONOBO_LIBS=`$GNOME_CONFIG $bonoboconf_args --libs bonobo bonobox`
+
+    bonobo_major_version=`$GNOME_CONFIG $bonobo_args --version | \
+           sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\1/'`
+    bonobo_minor_version=`$GNOME_CONFIG $bonobo_args --version | \
+           sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\2/'`
+    bonobo_micro_version=`$GNOME_CONFIG $bonobo_config_args --version | \
+           sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\3/'`
+    if test "x$enable_bonobotest" = "xyes" ; then
+      ac_save_CFLAGS="$CFLAGS"
+      ac_save_LIBS="$LIBS"
+      CFLAGS="$CFLAGS $BONOBO_CFLAGS"
+      LIBS="$LIBS $BONOBO_LIBS"
+dnl
+dnl Now check if the installed BONOBO is sufficiently new. (Also sanity
+dnl checks the results of gnome-config to some extent
+dnl
+      rm -f conf.bonobotest
+      AC_TRY_RUN([
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+#include <bonobo.h>
+
+static char*
+my_strdup (char *str)
+{
+  char *new_str;
+  
+  if (str)
+    {
+      new_str = malloc ((strlen (str) + 1) * sizeof(char));
+      strcpy (new_str, str);
+    }
+  else
+    new_str = NULL;
+  
+  return new_str;
+}
+
+int main ()
+{
+  int major, minor, micro;
+  char *tmp_version;
+
+  system ("touch conf.bonobotest");
+  bonobo_object_get_type ();
+  return 0;
+}
+
+],, no_bonobo=yes,[echo $ac_n "cross compiling; assumed OK... $ac_c"])
+       CFLAGS="$ac_save_CFLAGS"
+       LIBS="$ac_save_LIBS"
+     fi
+  fi
+  if test "x$no_bonobo" = x ; then
+     AC_MSG_RESULT(yes)
+     ifelse([$2], , :, [$2])     
+  else
+     AC_MSG_RESULT(no)
+     if test "$GNOME_CONFIG" = "no" ; then
+       echo "*** The gnome-config script installed by GNOME-LIBS could not be found"
+       echo "*** If BONOBO was installed in PREFIX, make sure PREFIX/bin is in"
+       echo "*** your path, or set the GNOME_CONFIG environment variable to the"
+       echo "*** full path to gnome-config."
+     else
+       if test -f conf.bonobotest ; then
+        :
+       else
+          echo "*** Could not run BONOBO test program, checking why..."
+          CFLAGS="$CFLAGS $BONOBO_CFLAGS"
+          LIBS="$LIBS $BONOBO_LIBS"
+          AC_TRY_LINK([
+#include <stdio.h>
+#include <bonobo/gnome-object.h>
+],      [ return 0; ],
+        [ echo "*** The test program compiled, but did not run. This usually means"
+          echo "*** that the run-time linker is not finding BONOBO or finding the wrong"
+          echo "*** version of BONOBO. If it is not finding BONOBO, you'll need to set your"
+          echo "*** LD_LIBRARY_PATH environment variable, or edit /etc/ld.so.conf to point"
+          echo "*** to the installed location  Also, make sure you have run ldconfig if that"
+          echo "*** is required on your system"
+	  echo "***"
+          echo "*** If you have an old version installed, it is best to remove it, although"
+          echo "*** you may also be able to get things to work by modifying LD_LIBRARY_PATH"],
+        [ echo "*** The test program failed to compile or link. See the file config.log for the"
+          echo "*** exact error that occured. This usually means BONOBO was incorrectly installed"
+          echo "*** or that you have moved BONOBO since it was installed. In the latter case, you"
+          echo "*** may want to edit the gnome-config script: $GNOME_CONFIG" ])
+          CFLAGS="$ac_save_CFLAGS"
+          LIBS="$ac_save_LIBS"
+       fi
+     fi
+     BONOBO_CFLAGS=""
+     BONOBO_LIBS=""
+     ifelse([$3], , :, [$3])
+  fi
+  AC_SUBST(BONOBO_CFLAGS)
+  AC_SUBST(BONOBO_LIBS)
+  rm -f conf.bonobotest
+])
+
+AC_DEFUN([BONOBO_CHECK], [
+	AM_PATH_BONOBO(0.1.0,,[AC_MSG_ERROR(BONOBO not found)])
+])
+
+AC_DEFUN([AM_BONOBO_USES_OAF],
+[
+	AC_REQUIRE([AM_PATH_BONOBO])
+
+	AC_MSG_CHECKING(if Bonobo uses OAF)
+	if ( gnome-config --libs bonobo | grep oaf ) > /dev/null 2>&1 ; then
+	  using_oaf="yes"
+	  AC_DEFINE(BONOBO_USES_OAF)
+	else
+	  using_oaf="no"
+	fi
+
+	AC_MSG_RESULT("$using_oaf")
+
+	AM_CONDITIONAL(BONOBO_USES_OAF, test x"using_oaf" = "xyes")
+])
diff -Nru gnome-print-0.25/macros/gnome-common.m4 gnome-print-0.25.new/macros/gnome-common.m4
--- gnome-print-0.25/macros/gnome-common.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-common.m4	Thu Aug  3 00:26:45 2000
@@ -0,0 +1,14 @@
+# gnome-common.m4
+# 
+# This only for packages that are not in the GNOME CVS tree.
+
+dnl GNOME_COMMON_INIT
+
+AC_DEFUN([GNOME_COMMON_INIT],
+[
+	GNOME_ACLOCAL_DIR="$GNOME_COMMON_MACROS_DIR"
+	AC_SUBST(GNOME_ACLOCAL_DIR)
+
+	ACLOCAL="$ACLOCAL $ACLOCAL_FLAGS"
+])
+
diff -Nru gnome-print-0.25/macros/gnome-fileutils.m4 gnome-print-0.25.new/macros/gnome-fileutils.m4
--- gnome-print-0.25/macros/gnome-fileutils.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-fileutils.m4	Thu Aug  3 00:26:45 2000
@@ -0,0 +1,414 @@
+dnl
+dnl GNOME_FILEUTILS_CHECKS
+dnl
+dnl checks that are needed for the diskusage applet.
+dnl
+
+AC_DEFUN([GNOME_FILEUTILS_CHECKS],
+[	
+AC_CHECK_HEADERS(fcntl.h sys/param.h sys/statfs.h sys/fstyp.h \
+mnttab.h mntent.h sys/statvfs.h sys/vfs.h sys/mount.h \
+sys/filsys.h sys/fs_types.h sys/fs/s5param.h)
+
+AC_CHECK_FUNCS(bcopy endgrent endpwent fchdir ftime ftruncate \
+getcwd getmntinfo gettimeofday isascii lchown \
+listmntent memcpy mkfifo strchr strerror strrchr vprintf)
+
+dnl Set some defaults when cross-compiling
+
+if test x$cross_compiling = xyes ; then
+	case "$host_os" in
+	linux*)
+	  fu_cv_sys_mounted_getmntent1=yes
+	  fu_cv_sys_stat_statfs2_bsize=yes
+	  ;;
+	sunos*)
+	  fu_cv_sys_stat_statfs4=yes
+	  ;;
+	freebsd*)
+	  fu_cv_sys_stat_statfs2_bsize=yes
+	  ;;
+	osf*)
+	  fu_cv_sys_stat_statfs3_osf1=yes
+	  ;;
+	esac
+fi
+
+# Determine how to get the list of mounted filesystems.
+list_mounted_fs=
+
+# If the getmntent function is available but not in the standard library,
+# make sure LIBS contains -lsun (on Irix4) or -lseq (on PTX).
+AC_FUNC_GETMNTENT
+
+# This test must precede the ones for getmntent because Unicos-9 is
+# reported to have the getmntent function, but its support is incompatible
+# with other getmntent implementations.
+
+# NOTE: Normally, I wouldn't use a check for system type as I've done for
+# `CRAY' below since that goes against the whole autoconf philosophy.  But
+# I think there is too great a chance that some non-Cray system has a
+# function named listmntent to risk the false positive.
+
+if test -z "$list_mounted_fs"; then
+# Cray UNICOS 9
+AC_MSG_CHECKING([for listmntent of Cray/Unicos-9])
+AC_CACHE_VAL(fu_cv_sys_mounted_cray_listmntent,
+[fu_cv_sys_mounted_cray_listmntent=no
+AC_EGREP_CPP(yes,
+[#ifdef _CRAY
+yes
+#endif
+], [test $ac_cv_func_listmntent = yes \
+&& fu_cv_sys_mounted_cray_listmntent=yes]
+)
+]
+)
+AC_MSG_RESULT($fu_cv_sys_mounted_cray_listmntent)
+if test $fu_cv_sys_mounted_cray_listmntent = yes; then
+list_mounted_fs=found
+AC_DEFINE(MOUNTED_LISTMNTENT)
+fi
+fi
+
+if test $ac_cv_func_getmntent = yes; then
+
+# This system has the getmntent function.
+# Determine whether it's the one-argument variant or the two-argument one.
+
+if test -z "$list_mounted_fs"; then
+# 4.3BSD, SunOS, HP-UX, Dynix, Irix
+AC_MSG_CHECKING([for one-argument getmntent function])
+AC_CACHE_VAL(fu_cv_sys_mounted_getmntent1,
+[test $ac_cv_header_mntent_h = yes \
+&& fu_cv_sys_mounted_getmntent1=yes \
+|| fu_cv_sys_mounted_getmntent1=no])
+AC_MSG_RESULT($fu_cv_sys_mounted_getmntent1)
+if test $fu_cv_sys_mounted_getmntent1 = yes; then
+list_mounted_fs=found
+AC_DEFINE(MOUNTED_GETMNTENT1)
+fi
+fi
+
+if test -z "$list_mounted_fs"; then
+# SVR4
+AC_MSG_CHECKING([for two-argument getmntent function])
+AC_CACHE_VAL(fu_cv_sys_mounted_getmntent2,
+[AC_EGREP_HEADER(getmntent, sys/mnttab.h,
+fu_cv_sys_mounted_getmntent2=yes,
+fu_cv_sys_mounted_getmntent2=no)])
+AC_MSG_RESULT($fu_cv_sys_mounted_getmntent2)
+if test $fu_cv_sys_mounted_getmntent2 = yes; then
+list_mounted_fs=found
+AC_DEFINE(MOUNTED_GETMNTENT2)
+fi
+fi
+
+if test -z "$list_mounted_fs"; then
+AC_MSG_ERROR([could not determine how to read list of mounted filesystems])
+fi
+
+fi
+
+if test -z "$list_mounted_fs"; then
+# DEC Alpha running OSF/1.
+AC_MSG_CHECKING([for getfsstat function])
+AC_CACHE_VAL(fu_cv_sys_mounted_getsstat,
+[AC_TRY_LINK([
+#include <sys/types.h>
+#include <sys/mount.h>
+#include <sys/fs_types.h>],
+[struct statfs *stats;
+int numsys = getfsstat ((struct statfs *)0, 0L, MNT_WAIT); ],
+fu_cv_sys_mounted_getsstat=yes,
+fu_cv_sys_mounted_getsstat=no)])
+AC_MSG_RESULT($fu_cv_sys_mounted_getsstat)
+if test $fu_cv_sys_mounted_getsstat = yes; then
+list_mounted_fs=found
+AC_DEFINE(MOUNTED_GETFSSTAT)
+fi
+fi
+
+if test -z "$list_mounted_fs"; then
+# AIX.
+AC_MSG_CHECKING([for mntctl function and struct vmount])
+AC_CACHE_VAL(fu_cv_sys_mounted_vmount,
+[AC_TRY_CPP([#include <fshelp.h>],
+fu_cv_sys_mounted_vmount=yes,
+fu_cv_sys_mounted_vmount=no)])
+AC_MSG_RESULT($fu_cv_sys_mounted_vmount)
+if test $fu_cv_sys_mounted_vmount = yes; then
+list_mounted_fs=found
+AC_DEFINE(MOUNTED_VMOUNT)
+fi
+fi
+
+if test -z "$list_mounted_fs"; then
+# SVR3
+AC_MSG_CHECKING([for FIXME existence of three headers])
+AC_CACHE_VAL(fu_cv_sys_mounted_fread_fstyp,
+[AC_TRY_CPP([
+#include <sys/statfs.h>
+#include <sys/fstyp.h>
+#include <mnttab.h>],
+fu_cv_sys_mounted_fread_fstyp=yes,
+fu_cv_sys_mounted_fread_fstyp=no)])
+AC_MSG_RESULT($fu_cv_sys_mounted_fread_fstyp)
+if test $fu_cv_sys_mounted_fread_fstyp = yes; then
+list_mounted_fs=found
+AC_DEFINE(MOUNTED_FREAD_FSTYP)
+fi
+fi
+
+if test -z "$list_mounted_fs"; then
+# 4.4BSD and DEC OSF/1.
+AC_MSG_CHECKING([for getmntinfo function])
+AC_CACHE_VAL(fu_cv_sys_mounted_getmntinfo,
+[
+ok=
+if test $ac_cv_func_getmntinfo = yes; then
+AC_EGREP_HEADER(f_type;, sys/mount.h,
+ok=yes)
+fi
+test -n "$ok" \
+&& fu_cv_sys_mounted_getmntinfo=yes \
+|| fu_cv_sys_mounted_getmntinfo=no
+])
+AC_MSG_RESULT($fu_cv_sys_mounted_getmntinfo)
+if test $fu_cv_sys_mounted_getmntinfo = yes; then
+list_mounted_fs=found
+AC_DEFINE(MOUNTED_GETMNTINFO)
+fi
+fi
+
+# FIXME: add a test for netbsd-1.1 here
+
+if test -z "$list_mounted_fs"; then
+# Ultrix
+AC_MSG_CHECKING([for getmnt function])
+AC_CACHE_VAL(fu_cv_sys_mounted_getmnt,
+[AC_TRY_CPP([
+#include <sys/fs_types.h>
+#include <sys/mount.h>],
+fu_cv_sys_mounted_getmnt=yes,
+fu_cv_sys_mounted_getmnt=no)])
+AC_MSG_RESULT($fu_cv_sys_mounted_getmnt)
+if test $fu_cv_sys_mounted_getmnt = yes; then
+list_mounted_fs=found
+AC_DEFINE(MOUNTED_GETMNT)
+fi
+fi
+
+if test -z "$list_mounted_fs"; then
+# SVR2
+AC_MSG_CHECKING([whether it is possible to resort to fread on /etc/mnttab])
+AC_CACHE_VAL(fu_cv_sys_mounted_fread,
+[AC_TRY_CPP([#include <mnttab.h>],
+fu_cv_sys_mounted_fread=yes,
+fu_cv_sys_mounted_fread=no)])
+AC_MSG_RESULT($fu_cv_sys_mounted_fread)
+if test $fu_cv_sys_mounted_fread = yes; then
+list_mounted_fs=found
+AC_DEFINE(MOUNTED_FREAD)
+fi
+fi
+
+if test -z "$list_mounted_fs"; then
+AC_MSG_ERROR([could not determine how to read list of mounted filesystems])
+# FIXME -- no need to abort building the whole package
+# Can't build mountlist.c or anything that needs its functions
+fi
+
+AC_CHECKING(how to get filesystem space usage)
+space=no
+
+# Perform only the link test since it seems there are no variants of the
+# statvfs function.  This check is more than just AC_CHECK_FUNCS(statvfs)
+# because that got a false positive on SCO OSR5.  Adding the declaration
+# of a `struct statvfs' causes this test to fail (as it should) on such
+# systems.  That system is reported to work fine with STAT_STATFS4 which
+# is what it gets when this test fails.
+if test $space = no; then
+# SVR4
+AC_CACHE_CHECK([statvfs function (SVR4)], fu_cv_sys_stat_statvfs,
+[AC_TRY_LINK([#include <sys/types.h>
+#include <sys/statvfs.h>],
+[struct statvfs fsd; statvfs (0, &fsd);],
+fu_cv_sys_stat_statvfs=yes,
+fu_cv_sys_stat_statvfs=no)])
+if test $fu_cv_sys_stat_statvfs = yes; then
+space=yes
+AC_DEFINE(STAT_STATVFS)
+fi
+fi
+
+if test $space = no; then
+# DEC Alpha running OSF/1
+AC_MSG_CHECKING([for 3-argument statfs function (DEC OSF/1)])
+AC_CACHE_VAL(fu_cv_sys_stat_statfs3_osf1,
+[AC_TRY_RUN([
+#include <sys/param.h>
+#include <sys/types.h>
+#include <sys/mount.h>
+main ()
+{
+struct statfs fsd;
+fsd.f_fsize = 0;
+exit (statfs (".", &fsd, sizeof (struct statfs)));
+}],
+fu_cv_sys_stat_statfs3_osf1=yes,
+fu_cv_sys_stat_statfs3_osf1=no,
+fu_cv_sys_stat_statfs3_osf1=no)])
+AC_MSG_RESULT($fu_cv_sys_stat_statfs3_osf1)
+if test $fu_cv_sys_stat_statfs3_osf1 = yes; then
+space=yes
+AC_DEFINE(STAT_STATFS3_OSF1)
+fi
+fi
+
+if test $space = no; then
+# AIX
+AC_MSG_CHECKING([for two-argument statfs with statfs.bsize dnl
+member (AIX, 4.3BSD)])
+AC_CACHE_VAL(fu_cv_sys_stat_statfs2_bsize,
+[AC_TRY_RUN([
+#ifdef HAVE_SYS_PARAM_H
+#include <sys/param.h>
+#endif
+#ifdef HAVE_SYS_MOUNT_H
+#include <sys/mount.h>
+#endif
+#ifdef HAVE_SYS_VFS_H
+#include <sys/vfs.h>
+#endif
+main ()
+{
+struct statfs fsd;
+fsd.f_bsize = 0;
+exit (statfs (".", &fsd));
+}],
+fu_cv_sys_stat_statfs2_bsize=yes,
+fu_cv_sys_stat_statfs2_bsize=no,
+fu_cv_sys_stat_statfs2_bsize=no)])
+AC_MSG_RESULT($fu_cv_sys_stat_statfs2_bsize)
+if test $fu_cv_sys_stat_statfs2_bsize = yes; then
+space=yes
+AC_DEFINE(STAT_STATFS2_BSIZE)
+fi
+fi
+
+if test $space = no; then
+# SVR3
+AC_MSG_CHECKING([for four-argument statfs (AIX-3.2.5, SVR3)])
+AC_CACHE_VAL(fu_cv_sys_stat_statfs4,
+[AC_TRY_RUN([#include <sys/types.h>
+#include <sys/statfs.h>
+main ()
+{
+struct statfs fsd;
+exit (statfs (".", &fsd, sizeof fsd, 0));
+}],
+fu_cv_sys_stat_statfs4=yes,
+fu_cv_sys_stat_statfs4=no,
+fu_cv_sys_stat_statfs4=no)])
+AC_MSG_RESULT($fu_cv_sys_stat_statfs4)
+if test $fu_cv_sys_stat_statfs4 = yes; then
+space=yes
+AC_DEFINE(STAT_STATFS4)
+fi
+fi
+
+if test $space = no; then
+# 4.4BSD and NetBSD
+AC_MSG_CHECKING([for two-argument statfs with statfs.fsize dnl
+member (4.4BSD and NetBSD)])
+AC_CACHE_VAL(fu_cv_sys_stat_statfs2_fsize,
+[AC_TRY_RUN([#include <sys/types.h>
+#ifdef HAVE_SYS_PARAM_H
+#include <sys/param.h>
+#endif
+#ifdef HAVE_SYS_MOUNT_H
+#include <sys/mount.h>
+#endif
+main ()
+{
+struct statfs fsd;
+fsd.f_fsize = 0;
+exit (statfs (".", &fsd));
+}],
+fu_cv_sys_stat_statfs2_fsize=yes,
+fu_cv_sys_stat_statfs2_fsize=no,
+fu_cv_sys_stat_statfs2_fsize=no)])
+AC_MSG_RESULT($fu_cv_sys_stat_statfs2_fsize)
+if test $fu_cv_sys_stat_statfs2_fsize = yes; then
+space=yes
+AC_DEFINE(STAT_STATFS2_FSIZE)
+fi
+fi
+
+if test $space = no; then
+# Ultrix
+AC_MSG_CHECKING([for two-argument statfs with struct fs_data (Ultrix)])
+AC_CACHE_VAL(fu_cv_sys_stat_fs_data,
+[AC_TRY_RUN([#include <sys/types.h>
+#ifdef HAVE_SYS_PARAM_H
+#include <sys/param.h>
+#endif
+#ifdef HAVE_SYS_MOUNT_H
+#include <sys/mount.h>
+#endif
+#ifdef HAVE_SYS_FS_TYPES_H
+#include <sys/fs_types.h>
+#endif
+main ()
+{
+struct fs_data fsd;
+/* Ultrix's statfs returns 1 for success,
+0 for not mounted, -1 for failure.  */
+exit (statfs (".", &fsd) != 1);
+}],
+fu_cv_sys_stat_fs_data=yes,
+fu_cv_sys_stat_fs_data=no,
+fu_cv_sys_stat_fs_data=no)])
+AC_MSG_RESULT($fu_cv_sys_stat_fs_data)
+if test $fu_cv_sys_stat_fs_data = yes; then
+space=yes
+AC_DEFINE(STAT_STATFS2_FS_DATA)
+fi
+fi
+
+if test $space = no; then
+# SVR2
+AC_TRY_CPP([#include <sys/filsys.h>],
+AC_DEFINE(STAT_READ_FILSYS) space=yes)
+fi
+
+if test -n "$list_mounted_fs" && test $space != no; then
+DF_PROG="df"
+# LIBOBJS="$LIBOBJS fsusage.o"
+# LIBOBJS="$LIBOBJS mountlist.o"
+fi
+
+# Check for SunOS statfs brokenness wrt partitions 2GB and larger.
+# If <sys/vfs.h> exists and struct statfs has a member named f_spare,
+# enable the work-around code in fsusage.c.
+AC_MSG_CHECKING([for statfs that truncates block counts])
+AC_CACHE_VAL(fu_cv_sys_truncating_statfs,
+[AC_TRY_COMPILE([
+#if !defined(sun) && !defined(__sun)
+choke -- this is a workaround for a Sun-specific problem
+#endif
+#include <sys/types.h>
+#include <sys/vfs.h>],
+[struct statfs t; long c = *(t.f_spare);],
+fu_cv_sys_truncating_statfs=yes,
+fu_cv_sys_truncating_statfs=no,
+)])
+if test $fu_cv_sys_truncating_statfs = yes; then
+AC_DEFINE(STATFS_TRUNCATES_BLOCK_COUNTS)
+fi
+AC_MSG_RESULT($fu_cv_sys_truncating_statfs)
+
+AC_CHECKING(for AFS)
+test -d /afs && AC_DEFINE(AFS)
+])
diff -Nru gnome-print-0.25/macros/gnome-gettext.m4 gnome-print-0.25.new/macros/gnome-gettext.m4
--- gnome-print-0.25/macros/gnome-gettext.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-gettext.m4	Wed Feb  7 22:33:01 2001
@@ -0,0 +1,336 @@
+# Macro to add for using GNU gettext.
+# Ulrich Drepper <drepper@cygnus.com>, 1995.
+#
+# Modified to never use included libintl. 
+# Owen Taylor <otaylor@redhat.com>, 12/15/1998
+#
+#
+# This file can be copied and used freely without restrictions.  It can
+# be used in projects which are not available under the GNU Public License
+# but which still want to provide support for the GNU gettext functionality.
+# Please note that the actual code is *not* freely available.
+
+# serial 5
+
+AC_DEFUN([AM_GNOME_WITH_NLS],
+  [AC_MSG_CHECKING([whether NLS is requested])
+    dnl Default is enabled NLS
+    AC_ARG_ENABLE(nls,
+      [  --disable-nls           do not use Native Language Support],
+      USE_NLS=$enableval, USE_NLS=yes)
+    AC_MSG_RESULT($USE_NLS)
+    AC_SUBST(USE_NLS)
+
+    USE_INCLUDED_LIBINTL=no
+
+    dnl If we use NLS figure out what method
+    if test "$USE_NLS" = "yes"; then
+#      AC_DEFINE(ENABLE_NLS)
+#      AC_MSG_CHECKING([whether included gettext is requested])
+#      AC_ARG_WITH(included-gettext,
+#        [  --with-included-gettext use the GNU gettext library included here],
+#        nls_cv_force_use_gnu_gettext=$withval,
+#        nls_cv_force_use_gnu_gettext=no)
+#      AC_MSG_RESULT($nls_cv_force_use_gnu_gettext)
+      nls_cv_force_use_gnu_gettext="no"
+
+      nls_cv_use_gnu_gettext="$nls_cv_force_use_gnu_gettext"
+      if test "$nls_cv_force_use_gnu_gettext" != "yes"; then
+        dnl User does not insist on using GNU NLS library.  Figure out what
+        dnl to use.  If gettext or catgets are available (in this order) we
+        dnl use this.  Else we have to fall back to GNU NLS library.
+	dnl catgets is only used if permitted by option --with-catgets.
+	nls_cv_header_intl=
+	nls_cv_header_libgt=
+	CATOBJEXT=NONE
+
+	AC_CHECK_HEADER(libintl.h,
+	  [AC_CACHE_CHECK([for gettext in libc], gt_cv_func_gettext_libc,
+	    [AC_TRY_LINK([#include <libintl.h>], [return (int) gettext ("")],
+	       gt_cv_func_gettext_libc=yes, gt_cv_func_gettext_libc=no)])
+
+	   if test "$gt_cv_func_gettext_libc" != "yes"; then
+	     AC_CHECK_LIB(intl, bindtextdomain,
+	       [AC_CACHE_CHECK([for gettext in libintl],
+		 gt_cv_func_gettext_libintl,
+		 [AC_CHECK_LIB(intl, gettext,
+		  gt_cv_func_gettext_libintl=yes,
+		  gt_cv_func_gettext_libintl=no)],
+		 gt_cv_func_gettext_libintl=no)])
+	   fi
+
+	   if test "$gt_cv_func_gettext_libc" = "yes" \
+	      || test "$gt_cv_func_gettext_libintl" = "yes"; then
+	      AC_DEFINE(HAVE_GETTEXT)
+	      AM_PATH_PROG_WITH_TEST(MSGFMT, msgfmt,
+		[test -z "`$ac_dir/$ac_word -h 2>&1 | grep 'dv '`"], no)dnl
+	      if test "$MSGFMT" != "no"; then
+		AC_CHECK_FUNCS(dcgettext)
+		AC_PATH_PROG(GMSGFMT, gmsgfmt, $MSGFMT)
+		AM_PATH_PROG_WITH_TEST(XGETTEXT, xgettext,
+		  [test -z "`$ac_dir/$ac_word -h 2>&1 | grep '(HELP)'`"], :)
+		AC_TRY_LINK(, [extern int _nl_msg_cat_cntr;
+			       return _nl_msg_cat_cntr],
+		  [CATOBJEXT=.gmo
+		   DATADIRNAME=share],
+		  [CATOBJEXT=.mo
+		   DATADIRNAME=lib])
+		INSTOBJEXT=.mo
+	      fi
+	    fi
+
+	    # Added by Martin Baulig 12/15/98 for libc5 systems
+	    if test "$gt_cv_func_gettext_libc" != "yes" \
+	       && test "$gt_cv_func_gettext_libintl" = "yes"; then
+	       INTLLIBS=-lintl
+	       LIBS=`echo $LIBS | sed -e 's/-lintl//'`
+	    fi
+	])
+
+        if test "$CATOBJEXT" = "NONE"; then
+	  AC_MSG_CHECKING([whether catgets can be used])
+	  AC_ARG_WITH(catgets,
+	    [  --with-catgets          use catgets functions if available],
+	    nls_cv_use_catgets=$withval, nls_cv_use_catgets=no)
+	  AC_MSG_RESULT($nls_cv_use_catgets)
+
+	  if test "$nls_cv_use_catgets" = "yes"; then
+	    dnl No gettext in C library.  Try catgets next.
+	    AC_CHECK_LIB(i, main)
+	    AC_CHECK_FUNC(catgets,
+	      [AC_DEFINE(HAVE_CATGETS)
+	       INTLOBJS="\$(CATOBJS)"
+	       AC_PATH_PROG(GENCAT, gencat, no)dnl
+#	       if test "$GENCAT" != "no"; then
+#		 AC_PATH_PROG(GMSGFMT, gmsgfmt, no)
+#		 if test "$GMSGFMT" = "no"; then
+#		   AM_PATH_PROG_WITH_TEST(GMSGFMT, msgfmt,
+#		    [test -z "`$ac_dir/$ac_word -h 2>&1 | grep 'dv '`"], no)
+#		 fi
+#		 AM_PATH_PROG_WITH_TEST(XGETTEXT, xgettext,
+#		   [test -z "`$ac_dir/$ac_word -h 2>&1 | grep '(HELP)'`"], :)
+#		 USE_INCLUDED_LIBINTL=yes
+#		 CATOBJEXT=.cat
+#		 INSTOBJEXT=.cat
+#		 DATADIRNAME=lib
+#		 INTLDEPS='$(top_builddir)/intl/libintl.a'
+#		 INTLLIBS=$INTLDEPS
+#		 LIBS=`echo $LIBS | sed -e 's/-lintl//'`
+#		 nls_cv_header_intl=intl/libintl.h
+#		 nls_cv_header_libgt=intl/libgettext.h
+#              fi
+            ])
+	  fi
+        fi
+
+        if test "$CATOBJEXT" = "NONE"; then
+	  dnl Neither gettext nor catgets in included in the C library.
+	  dnl Fall back on GNU gettext library.
+	  nls_cv_use_gnu_gettext=yes
+        fi
+      fi
+
+      if test "$nls_cv_use_gnu_gettext" != "yes"; then
+        AC_DEFINE(ENABLE_NLS)
+      else
+         # Unset this variable since we use the non-zero value as a flag.
+         CATOBJEXT=
+#        dnl Mark actions used to generate GNU NLS library.
+#        INTLOBJS="\$(GETTOBJS)"
+#        AM_PATH_PROG_WITH_TEST(MSGFMT, msgfmt,
+#	  [test -z "`$ac_dir/$ac_word -h 2>&1 | grep 'dv '`"], msgfmt)
+#        AC_PATH_PROG(GMSGFMT, gmsgfmt, $MSGFMT)
+#        AM_PATH_PROG_WITH_TEST(XGETTEXT, xgettext,
+#	  [test -z "`$ac_dir/$ac_word -h 2>&1 | grep '(HELP)'`"], :)
+#        AC_SUBST(MSGFMT)
+#	USE_INCLUDED_LIBINTL=yes
+#        CATOBJEXT=.gmo
+#        INSTOBJEXT=.mo
+#        DATADIRNAME=share
+#	INTLDEPS='$(top_builddir)/intl/libintl.a'
+#	INTLLIBS=$INTLDEPS
+#	LIBS=`echo $LIBS | sed -e 's/-lintl//'`
+#        nls_cv_header_intl=intl/libintl.h
+#        nls_cv_header_libgt=intl/libgettext.h
+      fi
+
+      dnl Test whether we really found GNU xgettext.
+      if test "$XGETTEXT" != ":"; then
+	dnl If it is no GNU xgettext we define it as : so that the
+	dnl Makefiles still can work.
+	if $XGETTEXT --omit-header /dev/null 2> /dev/null; then
+	  : ;
+	else
+	  AC_MSG_RESULT(
+	    [found xgettext program is not GNU xgettext; ignore it])
+	  XGETTEXT=":"
+	fi
+      fi
+
+      # We need to process the po/ directory.
+      POSUB=po
+    else
+      DATADIRNAME=share
+      nls_cv_header_intl=intl/libintl.h
+      nls_cv_header_libgt=intl/libgettext.h
+    fi
+    AC_LINK_FILES($nls_cv_header_libgt, $nls_cv_header_intl)
+    AC_OUTPUT_COMMANDS(
+     [case "$CONFIG_FILES" in *po/Makefile.in*)
+        sed -e "/POTFILES =/r po/POTFILES" po/Makefile.in > po/Makefile
+      esac])
+
+
+#    # If this is used in GNU gettext we have to set USE_NLS to `yes'
+#    # because some of the sources are only built for this goal.
+#    if test "$PACKAGE" = gettext; then
+#      USE_NLS=yes
+#      USE_INCLUDED_LIBINTL=yes
+#    fi
+
+    dnl These rules are solely for the distribution goal.  While doing this
+    dnl we only have to keep exactly one list of the available catalogs
+    dnl in configure.in.
+    for lang in $ALL_LINGUAS; do
+      GMOFILES="$GMOFILES $lang.gmo"
+      POFILES="$POFILES $lang.po"
+    done
+
+    dnl Make all variables we use known to autoconf.
+    AC_SUBST(USE_INCLUDED_LIBINTL)
+    AC_SUBST(CATALOGS)
+    AC_SUBST(CATOBJEXT)
+    AC_SUBST(DATADIRNAME)
+    AC_SUBST(GMOFILES)
+    AC_SUBST(INSTOBJEXT)
+    AC_SUBST(INTLDEPS)
+    AC_SUBST(INTLLIBS)
+    AC_SUBST(INTLOBJS)
+    AC_SUBST(POFILES)
+    AC_SUBST(POSUB)
+  ])
+
+AC_DEFUN([AM_GNOME_GETTEXT],
+  [AC_REQUIRE([AC_PROG_MAKE_SET])dnl
+   AC_REQUIRE([AC_PROG_CC])dnl
+   AC_REQUIRE([AC_PROG_RANLIB])dnl
+   AC_REQUIRE([AC_ISC_POSIX])dnl
+   AC_REQUIRE([AC_HEADER_STDC])dnl
+   AC_REQUIRE([AC_C_CONST])dnl
+   AC_REQUIRE([AC_C_INLINE])dnl
+   AC_REQUIRE([AC_TYPE_OFF_T])dnl
+   AC_REQUIRE([AC_TYPE_SIZE_T])dnl
+   AC_REQUIRE([AC_FUNC_ALLOCA])dnl
+   AC_REQUIRE([AC_FUNC_MMAP])dnl
+
+   AC_CHECK_HEADERS([argz.h limits.h locale.h nl_types.h malloc.h string.h \
+unistd.h sys/param.h])
+   AC_CHECK_FUNCS([getcwd munmap putenv setenv setlocale strchr strcasecmp \
+strdup __argz_count __argz_stringify __argz_next])
+
+   if test "${ac_cv_func_stpcpy+set}" != "set"; then
+     AC_CHECK_FUNCS(stpcpy)
+   fi
+   if test "${ac_cv_func_stpcpy}" = "yes"; then
+     AC_DEFINE(HAVE_STPCPY)
+   fi
+
+   AM_LC_MESSAGES
+   AM_GNOME_WITH_NLS
+
+   if test "x$CATOBJEXT" != "x"; then
+     if test "x$ALL_LINGUAS" = "x"; then
+       LINGUAS=
+     else
+       AC_MSG_CHECKING(for catalogs to be installed)
+       NEW_LINGUAS=
+       if test "x$LINGUAS" = "x"; then
+           LINGUAS=$ALL_LINGUAS
+       fi
+       for lang in $LINGUAS; do
+         case "$ALL_LINGUAS" in
+          *\ $lang\ *|$lang\ *|*\ $lang) NEW_LINGUAS="$NEW_LINGUAS $lang" ;;
+         esac
+       done
+       LINGUAS=$NEW_LINGUAS
+       AC_MSG_RESULT($LINGUAS)
+     fi
+
+     dnl Construct list of names of catalog files to be constructed.
+     if test -n "$LINGUAS"; then
+       for lang in $LINGUAS; do CATALOGS="$CATALOGS $lang$CATOBJEXT"; done
+     fi
+   fi
+
+   dnl The reference to <locale.h> in the installed <libintl.h> file
+   dnl must be resolved because we cannot expect the users of this
+   dnl to define HAVE_LOCALE_H.
+   if test $ac_cv_header_locale_h = yes; then
+     INCLUDE_LOCALE_H="#include <locale.h>"
+   else
+     INCLUDE_LOCALE_H="\
+/* The system does not provide the header <locale.h>.  Take care yourself.  */"
+   fi
+   AC_SUBST(INCLUDE_LOCALE_H)
+
+   dnl Determine which catalog format we have (if any is needed)
+   dnl For now we know about two different formats:
+   dnl   Linux libc-5 and the normal X/Open format
+   test -d intl || mkdir intl
+   if test "$CATOBJEXT" = ".cat"; then
+     AC_CHECK_HEADER(linux/version.h, msgformat=linux, msgformat=xopen)
+
+     dnl Transform the SED scripts while copying because some dumb SEDs
+     dnl cannot handle comments.
+     sed -e '/^#/d' $srcdir/intl/$msgformat-msg.sed > intl/po2msg.sed
+   fi
+   dnl po2tbl.sed is always needed.
+   sed -e '/^#.*[^\\]$/d' -e '/^#$/d' \
+     $srcdir/intl/po2tbl.sed.in > intl/po2tbl.sed
+
+   dnl In the intl/Makefile.in we have a special dependency which makes
+   dnl only sense for gettext.  We comment this out for non-gettext
+   dnl packages.
+   if test "$PACKAGE" = "gettext"; then
+     GT_NO="#NO#"
+     GT_YES=
+   else
+     GT_NO=
+     GT_YES="#YES#"
+   fi
+   AC_SUBST(GT_NO)
+   AC_SUBST(GT_YES)
+
+   dnl If the AC_CONFIG_AUX_DIR macro for autoconf is used we possibly
+   dnl find the mkinstalldirs script in another subdir but ($top_srcdir).
+   dnl Try to locate is.
+   MKINSTALLDIRS=
+   if test -n "$ac_aux_dir"; then
+     MKINSTALLDIRS="$ac_aux_dir/mkinstalldirs"
+   fi
+   if test -z "$MKINSTALLDIRS"; then
+     MKINSTALLDIRS="\$(top_srcdir)/mkinstalldirs"
+   fi
+   AC_SUBST(MKINSTALLDIRS)
+
+   dnl *** For now the libtool support in intl/Makefile is not for real.
+   l=
+   AC_SUBST(l)
+
+   dnl Generate list of files to be processed by xgettext which will
+   dnl be included in po/Makefile.
+   test -d po || mkdir po
+   if test "x$srcdir" != "x."; then
+     if test "x`echo $srcdir | sed 's@/.*@@'`" = "x"; then
+       posrcprefix="$srcdir/"
+     else
+       posrcprefix="../$srcdir/"
+     fi
+   else
+     posrcprefix="../"
+   fi
+   rm -f po/POTFILES
+   sed -e "/^#/d" -e "/^\$/d" -e "s,.*,	$posrcprefix& \\\\," -e "\$s/\(.*\) \\\\/\1/" \
+	< $srcdir/po/POTFILES.in > po/POTFILES
+  ])
+
diff -Nru gnome-print-0.25/macros/gnome-ghttp-check.m4 gnome-print-0.25.new/macros/gnome-ghttp-check.m4
--- gnome-print-0.25/macros/gnome-ghttp-check.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-ghttp-check.m4	Thu Aug  3 00:26:45 2000
@@ -0,0 +1,14 @@
+AC_DEFUN([GNOME_GHTTP_CHECK],[
+	AC_REQUIRE([GNOME_INIT_HOOK])
+	GHTTP_LIB=
+	AC_CHECK_FUNC(connect,,[
+	  AC_CHECK_LIB(socket,connect,
+		GHTTP_LIB="-lsocket $GHTTP_LIB",,$GHTTP_LIB)])
+	AC_CHECK_FUNC(gethostbyname,,[
+ 	  AC_CHECK_LIB(nsl,gethostbyname,
+		GHTTP_LIB="-lnsl $GHTTP_LIB",,$GHTTP_LIB)])
+	AC_CHECK_LIB(ghttp, ghttp_request_new, 
+		GHTTP_LIB="-lghttp $GHTTP_LIB",GHTTP_LIB="",-L$gnome_prefix $GHTTP_LIB)
+	AC_SUBST(GHTTP_LIB)
+	AC_PROVIDE([GNOME_GHTTP_CHECK])
+])
diff -Nru gnome-print-0.25/macros/gnome-gnorba-check.m4 gnome-print-0.25.new/macros/gnome-gnorba-check.m4
--- gnome-print-0.25/macros/gnome-gnorba-check.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-gnorba-check.m4	Thu Aug  3 00:26:45 2000
@@ -0,0 +1,35 @@
+dnl
+dnl GNOME_GNORBA_HOOK (script-if-gnorba-found, failflag)
+dnl
+dnl if failflag is "failure" it aborts if gnorba is not found.
+dnl
+
+AC_DEFUN([GNOME_GNORBA_HOOK],[
+	GNOME_ORBIT_HOOK([],$2)
+	AC_CACHE_CHECK([for gnorba libraries],gnome_cv_gnorba_found,[
+		gnome_cv_gnorba_found=no
+		if test x$gnome_cv_orbit_found = xyes; then
+			GNORBA_CFLAGS="`gnome-config --cflags gnorba gnomeui`"
+			GNORBA_LIBS="`gnome-config --libs gnorba gnomeui`"
+			if test -n "$GNORBA_LIBS"; then
+				gnome_cv_gnorba_found=yes
+			fi
+		fi
+	])
+	AM_CONDITIONAL(HAVE_GNORBA, test x$gnome_cv_gnorba_found = xyes)
+	if test x$gnome_cv_orbit_found = xyes; then
+		$1
+		GNORBA_CFLAGS="`gnome-config --cflags gnorba gnomeui`"
+		GNORBA_LIBS="`gnome-config --libs gnorba gnomeui`"
+		AC_SUBST(GNORBA_CFLAGS)
+		AC_SUBST(GNORBA_LIBS)
+	else
+	    	if test x$2 = xfailure; then
+			AC_MSG_ERROR(gnorba library not installed or installation problem)
+	    	fi
+	fi
+])
+
+AC_DEFUN([GNOME_GNORBA_CHECK], [
+	GNOME_GNORBA_HOOK([],failure)
+])
diff -Nru gnome-print-0.25/macros/gnome-guile-checks.m4 gnome-print-0.25.new/macros/gnome-guile-checks.m4
--- gnome-print-0.25/macros/gnome-guile-checks.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-guile-checks.m4	Thu Aug  3 00:26:45 2000
@@ -0,0 +1,119 @@
+dnl
+dnl GNOME_CHECK_GUILE (failflag)
+dnl
+dnl if failflag is "fail" then GNOME_CHECK_GUILE will abort if guile is not found.
+dnl
+
+AC_DEFUN([GNOME_CHECK_GUILE],
+[
+	saved_ldflags="$LDFLAGS"
+	saved_cppflags="$CPPFLAGS"
+	LDFLAGS="$LDFLAGS $GNOME_LIBDIR"
+
+	AC_CHECK_LIB(qthreads,qt_null,[
+		QTTHREADS_LIB="-lqthreads"
+	],[
+		AC_CHECK_LIB(qt, qt_null, QTTHREADS_LIB="-lqt")
+	],$LIBS)
+	AC_SUBST(QTTHREADS_LIB)
+
+	AC_CHECK_LIB(termcap,main,TERMCAP_LIB="-ltermcap")
+	AC_CHECK_LIB(readline,main,READLINE_LIB="-lreadline",,$TERMCAP_LIB)
+
+	AC_SUBST(TERMCAP_LIB)
+	AC_SUBST(READLINE_LIB)
+
+	if test "x$cross_compiling" = "xyes" ; then
+	  name_build_guile="$target_alias-guile-config"
+	else
+	  name_build_guile="guile-config"
+	fi
+
+	AC_CHECK_PROG(BUILD_GUILE, $name_build_guile, yes, no)
+
+	if test "x$BUILD_GUILE" = "xyes"; then
+	    AC_MSG_CHECKING(whether $name_build_guile works)
+	    if test x`$name_build_guile --version >/dev/null 2>&1 || \
+		echo no` = xno; then
+		BUILD_GUILE=no
+	    fi
+	    AC_MSG_RESULT($BUILD_GUILE)
+	else
+
+	    if test "x$cross_compiling" = "xyes" ; then
+		name_build_guile="$target_alias-build-guile"
+	    else	
+		name_build_guile="build-guile"
+	    fi
+
+	    AC_CHECK_PROG(BUILD_GUILE, $name_build_guile, yes, no)
+
+	    if test "x$BUILD_GUILE" = "xyes"; then
+		AC_MSG_CHECKING(whether $name_build_guile works)
+		if test x`$name_build_guile --version >/dev/null 2>&1 || \
+	 	    echo no` = xno; then
+		    BUILD_GUILE=no
+		fi
+		AC_MSG_RESULT($BUILD_GUILE)
+	    fi
+	fi
+
+	AC_CHECK_LIB(m, sin)
+
+	if test "x$BUILD_GUILE" = "xyes"; then
+		AC_MSG_CHECKING(for guile libraries)
+		GUILE_LIBS="`$name_build_guile link`"
+		AC_MSG_RESULT($GUILE_LIBS)
+		AC_MSG_CHECKING(for guile headers)
+		GUILE_INCS="`$name_build_guile compile`"
+		AC_MSG_RESULT($GUILE_INCS)
+	else
+		GUILE_LIBS="$GNOME_LIBDIR"
+		GUILE_INCS="$GNOME_INCLUDEDIR"
+		AC_CHECK_LIB(rx, main, GUILE_LIBS="-lrx $GUILE_LIBS")
+		AC_CHECK_LIB(qt, qt_null, GUILE_LIBS="-lqt $GUILE_LIBS")
+		AC_CHECK_LIB(dl, dlopen, GUILE_LIBS="-ldl $GUILE_LIBS")
+		AC_CHECK_LIB(nsl, t_accept, GUILE_LIBS="$GUILE_LIBS -lnsl")
+		AC_CHECK_LIB(socket, socket, GUILE_LIBS="$GUILE_LIBS -lsocket")
+		GUILE_LIBS="-lguile $GUILE_LIBS $QTTHREADS_LIB $READLINE_LIB $TERMCAP_LIB"
+	fi
+
+	AC_SUBST(GUILE_LIBS)
+	AC_SUBST(GUILE_INCS)
+
+	saved_LIBS="$LIBS"
+	LIBS="$LIBS $GUILE_LIBS"
+	CPPFLAGS="$saved_cppflags $GUILE_INCS"
+
+	AC_MSG_CHECKING(whether guile works)
+	AC_TRY_LINK([
+		#include <libguile.h>
+		#include <guile/gh.h>
+	],[
+		gh_eval_str("(newline)");
+		scm_boot_guile(0,NULL,NULL,NULL);
+	],[
+		ac_cv_guile_found=yes
+		AC_DEFINE(HAVE_GUILE)
+	],[
+		ac_cv_guile_found=no
+	])
+	AC_MSG_RESULT($ac_cv_guile_found)
+
+	if test x$ac_cv_guile_found = xno ; then
+		if test x$1 = xfail ; then
+		  AC_MSG_ERROR(Can not find Guile on this system)
+		else
+		  AC_MSG_WARN(Can not find Guile on this system)
+		fi
+		ac_cv_guile_found=no
+		GUILE_LIBS= GUILE_INCS=
+	fi
+
+	LIBS="$saved_LIBS"
+	LDFLAGS="$saved_ldflags"
+	CPPFLAGS="$saved_cppflags"
+
+	AC_SUBST(GUILE_LIBS)
+	AM_CONDITIONAL(GUILE, test x$ac_cv_guile_found = xyes)
+])
diff -Nru gnome-print-0.25/macros/gnome-libgtop-check.m4 gnome-print-0.25.new/macros/gnome-libgtop-check.m4
--- gnome-print-0.25/macros/gnome-libgtop-check.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-libgtop-check.m4	Wed Feb  7 22:33:01 2001
@@ -0,0 +1,217 @@
+dnl
+dnl LIBGTOP_CHECK_TYPE
+dnl
+dnl Improved version of AC_CHECK_TYPE which takes into account
+dnl that we need to #include some other header files on some
+dnl systems to get some types.
+
+dnl AC_LIBGTOP_CHECK_TYPE(TYPE, DEFAULT)
+AC_DEFUN([AC_LIBGTOP_CHECK_TYPE],
+[AC_REQUIRE([AC_HEADER_STDC])dnl
+AC_MSG_CHECKING(for $1)
+AC_CACHE_VAL(ac_cv_type_$1,
+[AC_EGREP_CPP(dnl
+changequote(<<,>>)dnl
+<<(^|[^a-zA-Z_0-9])$1[^a-zA-Z_0-9]>>dnl
+changequote([,]), [#include <sys/types.h>
+#if STDC_HEADERS
+#include <stdlib.h>
+#include <stddef.h>
+#endif
+
+/* For Tru64 */
+#ifdef HAVE_SYS_BITYPES_H
+#include <sys/bitypes.h>
+#endif
+], ac_cv_type_$1=yes, ac_cv_type_$1=no)])dnl
+AC_MSG_RESULT($ac_cv_type_$1)
+if test $ac_cv_type_$1 = no; then
+  AC_DEFINE($1, $2)
+fi
+])
+
+dnl
+dnl GNOME_LIBGTOP_TYPES
+dnl
+dnl some typechecks for libgtop.
+dnl
+
+AC_DEFUN([GNOME_LIBGTOP_TYPES],
+[
+	AC_CHECK_HEADERS(sys/bitypes.h)
+	AC_LIBGTOP_CHECK_TYPE(u_int64_t, unsigned long long int)
+	AC_LIBGTOP_CHECK_TYPE(int64_t, signed long long int)
+])
+
+dnl
+dnl GNOME_LIBGTOP_HOOK (minversion, script-if-libgtop-enabled, failflag)
+dnl
+dnl if failflag is "fail" then GNOME_LIBGTOP_HOOK will abort if LibGTop
+dnl is not found. 
+dnl
+
+AC_DEFUN([GNOME_LIBGTOP_HOOK],
+[	
+	AC_REQUIRE([GNOME_LIBGTOP_TYPES])
+
+	AC_SUBST(LIBGTOP_LIBDIR)
+	AC_SUBST(LIBGTOP_INCLUDEDIR)
+	AC_SUBST(LIBGTOP_EXTRA_LIBS)
+	AC_SUBST(LIBGTOP_LIBS)
+	AC_SUBST(LIBGTOP_INCS)
+	AC_SUBST(LIBGTOP_NAMES_LIBS)
+	AC_SUBST(LIBGTOP_NAMES_INCS)
+	AC_SUBST(LIBGTOP_MAJOR_VERSION)
+	AC_SUBST(LIBGTOP_MINOR_VERSION)
+	AC_SUBST(LIBGTOP_MICRO_VERSION)
+	AC_SUBST(LIBGTOP_VERSION)
+	AC_SUBST(LIBGTOP_VERSION_CODE)
+	AC_SUBST(LIBGTOP_SERVER_VERSION)
+	AC_SUBST(LIBGTOP_INTERFACE_AGE)
+	AC_SUBST(LIBGTOP_BINARY_AGE)
+	AC_SUBST(LIBGTOP_BINDIR)
+	AC_SUBST(LIBGTOP_SERVER)
+
+	dnl Get the cflags and libraries from the libgtop-config script
+	dnl
+	AC_ARG_WITH(libgtop,
+	[  --with-libgtop=PFX      Prefix where LIBGTOP is installed (optional)],
+	libgtop_config_prefix="$withval", libgtop_config_prefix="")
+	AC_ARG_WITH(libgtop-exec,
+	[  --with-libgtop-exec=PFX Exec prefix where LIBGTOP is installed (optional)],
+	libgtop_config_exec_prefix="$withval", libgtop_config_exec_prefix="")
+
+	if test x$libgtop_config_exec_prefix != x ; then
+	  libgtop_config_args="$libgtop_config_args --exec-prefix=$libgtop_config_exec_prefix"
+	  if test x${LIBGTOP_CONFIG+set} != xset ; then
+	    LIBGTOP_CONFIG=$libgtop_config_exec_prefix/bin/libgtop-config
+	  fi
+	fi
+	if test x$libgtop_config_prefix != x ; then
+	  libgtop_config_args="$libgtop_config_args --prefix=$libgtop_config_prefix"
+	  if test x${LIBGTOP_CONFIG+set} != xset ; then
+	    LIBGTOP_CONFIG=$libgtop_config_prefix/bin/libgtop-config
+	  fi
+	fi
+
+	AC_PATH_PROG(LIBGTOP_CONFIG, libgtop-config, no)
+	dnl IMPORTANT NOTICE:
+	dnl   If you increase this number here, this means that *ALL*
+	dnl   modules will require the new version, even if they explicitly
+	dnl   give a lower number in their `configure.in' !!!
+	real_min_libgtop_version=1.0.0
+	min_libgtop_version=ifelse([$1], ,$real_min_libgtop_version,$1)
+	dnl I know, the following code looks really ugly, but if you want
+	dnl to make changes, please test it with a brain-dead /bin/sh and
+	dnl with a brain-dead /bin/test (not all shells/tests support the
+	dnl `<' operator to compare strings, that's why I convert everything
+	dnl into numbers and test them).
+	min_libgtop_major=`echo $min_libgtop_version | \
+	  sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\1/'`
+	min_libgtop_minor=`echo $min_libgtop_version | \
+	  sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\2/'`
+	min_libgtop_micro=`echo $min_libgtop_version | \
+	  sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\3/'`
+	test x$min_libgtop_micro = x && min_libgtop_micro=0
+	real_min_libgtop_major=`echo $real_min_libgtop_version | \
+	  sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\1/'`
+	real_min_libgtop_minor=`echo $real_min_libgtop_version | \
+	  sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\2/'`
+	real_min_libgtop_micro=`echo $real_min_libgtop_version | \
+	  sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\3/'`
+	test x$real_min_libgtop_micro = x && real_min_libgtop_micro=0
+	dnl You cannot require a version less then $real_min_libgtop_version,
+	dnl so you don't need to update each `configure.in' when it's increased.
+	if test $real_min_libgtop_major -gt $min_libgtop_major ; then
+	  min_libgtop_major=$real_min_libgtop_major
+	  min_libgtop_minor=$real_min_libgtop_minor
+	  min_libgtop_micro=$real_min_libgtop_micro
+	elif test $real_min_libgtop_major = $min_libgtop_major ; then
+	  if test $real_min_libgtop_minor -gt $min_libgtop_minor ; then
+	    min_libgtop_minor=$real_min_libgtop_minor
+	    min_libgtop_micro=$real_min_libgtop_micro
+	  elif test $real_min_libgtop_minor = $min_libgtop_minor ; then
+	    if test $real_min_libgtop_micro -gt $min_libgtop_micro ; then
+	      min_libgtop_micro=$real_min_libgtop_micro
+	    fi
+	  fi
+	fi
+	min_libgtop_version="$min_libgtop_major.$min_libgtop_minor.$min_libgtop_micro"
+	AC_MSG_CHECKING(for libgtop - version >= $min_libgtop_version)
+	no_libgtop=""
+	if test "$LIBGTOP_CONFIG" = "no" ; then
+	  no_libgtop=yes
+	else
+	  configfile=`$LIBGTOP_CONFIG --config`
+	  libgtop_major_version=`$LIBGTOP_CONFIG --version | \
+	    sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\1/'`
+	  libgtop_minor_version=`$LIBGTOP_CONFIG --version | \
+	    sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\2/'`
+	  libgtop_micro_version=`$LIBGTOP_CONFIG --version | \
+	    sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\3/'`
+	  if test $libgtop_major_version != $min_libgtop_major ; then 
+	    no_libgtop=mismatch
+	  else 
+ 	    test $libgtop_minor_version -lt $min_libgtop_minor && no_libgtop=yes
+	    if test $libgtop_minor_version = $min_libgtop_minor ; then
+	      test $libgtop_micro_version -lt $min_libgtop_micro && no_libgtop=yes
+	    fi
+	  fi
+	  . $configfile
+	fi
+	if test x$no_libgtop = x ; then
+	  AC_DEFINE(HAVE_LIBGTOP)
+	  AC_DEFINE_UNQUOTED(LIBGTOP_VERSION, "$LIBGTOP_VERSION")
+	  AC_DEFINE_UNQUOTED(LIBGTOP_VERSION_CODE, $LIBGTOP_VERSION_CODE)
+	  AC_DEFINE_UNQUOTED(LIBGTOP_MAJOR_VERSION, $LIBGTOP_MAJOR_VERSION)
+	  AC_DEFINE_UNQUOTED(LIBGTOP_MINOR_VERSION, $LIBGTOP_MINOR_VERSION)
+	  AC_DEFINE_UNQUOTED(LIBGTOP_MICRO_VERSION, $LIBGTOP_MICRO_VERSION)
+	  AC_DEFINE_UNQUOTED(LIBGTOP_SERVER_VERSION, $LIBGTOP_SERVER_VERSION)
+	  AC_MSG_RESULT(yes)
+	  dnl Note that an empty true branch is not valid sh syntax.
+	  ifelse([$2], [], :, [$2])
+	else
+	  AC_MSG_RESULT(no)
+	  if test "$no_libgtop"x = mismatchx; then
+	    AC_MSG_ERROR(LibGTop major version mismatch $libgtop_major_version != $min_libgtop_major)
+	  fi
+	  if test "x$3" = "xfail"; then
+	    AC_MSG_ERROR(LibGTop >= $min_libgtop_version not found)
+	  else
+	    AC_MSG_WARN(LibGTop >= $min_libgtop_version not found)
+	  fi
+	fi
+
+	AM_CONDITIONAL(HAVE_LIBGTOP, test x$no_libgtop != xyes)
+])
+
+AC_DEFUN([GNOME_INIT_LIBGTOP],[
+	GNOME_LIBGTOP_HOOK($1,[ifelse([$3], [], :, [$3])],$2)
+])
+
+dnl
+dnl GNOME_LIBGTOP_DOCU
+dnl
+dnl checks whether the documentation of LibGTop is installed
+dnl
+
+AC_DEFUN([GNOME_LIBGTOP_DOCU],
+[
+	AC_REQUIRE([GNOME_LIBGTOP_HOOK])
+
+	helpdir="$LIBGTOP_DATADIR/gnome/help/libgtop"
+
+	AC_MSG_CHECKING(whether you have the LibGTop Documentation)
+
+	if test -f "$helpdir/C/topic.dat" ; then
+	  have_libgtop_docu=yes
+	  AC_DEFINE(HAVE_LIBGTOP_DOCU)
+	else
+	  have_libgtop_docu=no
+	fi
+
+	AC_MSG_RESULT($have_libgtop_docu)
+
+	AM_CONDITIONAL(HAVE_LIBGTOP_DOCU, test x$have_libgtop_docu = xyes)
+])
+
diff -Nru gnome-print-0.25/macros/gnome-objc-checks.m4 gnome-print-0.25.new/macros/gnome-objc-checks.m4
--- gnome-print-0.25/macros/gnome-objc-checks.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-objc-checks.m4	Thu Aug  3 00:26:45 2000
@@ -0,0 +1,83 @@
+AC_DEFUN([GNOME_CHECK_OBJC],
+[
+dnl Look for an ObjC compiler.
+dnl FIXME: extend list of possible names of ObjC compilers.
+  AC_CHECK_PROGS(OBJC, $OBJC egcs, "")
+  if test "x$OBJC" = "x" ; then
+    AC_CHECK_PROGS(OBJC, $OBJC egcc, "")
+    if test "x$OBJC" = "x" ; then
+      AC_CHECK_PROGS(OBJC, $OBJC gcc, "")
+    fi
+  fi
+
+  AC_REQUIRE([GNOME_PTHREAD_CHECK])
+
+  OBJC_LIBS="-lobjc $PTHREAD_LIB"
+  AC_CHECK_FUNC(sched_yield,,[
+    AC_CHECK_LIB(rt,sched_yield,
+      OBJC_LIBS="$OBJC_LIBS -lrt",[
+      AC_CHECK_LIB(posix4,sched_yield,
+        OBJC_LIBS="$OBJC_LIBS -lposix4",, 
+        $OBJC_LIBS)],
+      $OBJC_LIBS)])
+  AC_SUBST(OBJC_LIBS)
+
+  AC_CACHE_CHECK([if Objective C compiler ($OBJC) works],
+		 ac_cv_prog_objc_works, [
+    if test -n "$OBJC"; then
+      cat > conftest.m <<EOF
+#include <objc/Object.h>
+@interface myRandomObj : Object
+{
+}
+@end
+@implementation myRandomObj
+@end
+int main () {
+  /* No, you are not seeing double.  Remember that square brackets
+     are the autoconf m4 quotes.  */
+  id myid = [[myRandomObj alloc]];
+  [[myid free]];
+  return 0;
+}
+EOF
+
+      $OBJC $CFLAGS -o conftest $LDFLAGS conftest.m $OBJC_LIBS 1>&AC_FD_CC 2>&1
+      result=$?
+      rm -f conftest*
+
+      if test $result -eq 0; then
+        ac_cv_prog_objc_works=yes
+      fi
+    else
+      ac_cv_prog_objc_works=no
+    fi
+  ])
+
+  AM_CONDITIONAL(OBJECTIVE_C, test x$ac_cv_prog_objc_works = xyes)
+  dnl Also set the shell variable OBJECTIVE_C to "yes" or "no".
+  OBJECTIVE_C=$ac_cv_prog_objc_works
+])
+
+AC_DEFUN([GNOME_INIT_OBJC],
+[
+	AC_MSG_CHECKING(for an obGnomeConf.sh)
+	my_gnome_libdir=`$GNOME_CONFIG --libdir`
+	if test -f $my_gnome_libdir/obGnomeConf.sh; then
+	    . $my_gnome_libdir/obGnomeConf.sh
+	    AC_MSG_RESULT(found $my_gnome_libdir)
+	    ac_cv_have_gnome_objc=yes
+	else
+	    AC_MSG_RESULT(not found)
+	    AC_MSG_WARN(Could not find the obGnomeConf.sh file that is generated by gnome-objc install)
+	    ac_cv_have_gnome_objc=no
+	fi
+	
+	dnl Add a conditional on whether or not we have gnome-objc
+	AM_CONDITIONAL(HAVE_GNOME_OBJC, test x$ac_cv_have_gnome_objc = xyes)
+	HAVE_GNOME_OBJC=$ac_cv_have_gnome_objc
+
+	AC_SUBST(OBGNOME_INCLUDEDIR)
+	AC_SUBST(OBGNOME_LIBS)
+	AC_SUBST(OBGTK_LIBS)
+])
diff -Nru gnome-print-0.25/macros/gnome-orbit-check.m4 gnome-print-0.25.new/macros/gnome-orbit-check.m4
--- gnome-print-0.25/macros/gnome-orbit-check.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-orbit-check.m4	Thu Aug  3 00:26:45 2000
@@ -0,0 +1,33 @@
+dnl
+dnl GNOME_ORBIT_HOOK (script-if-orbit-found, failflag)
+dnl
+dnl if failflag is "failure" it aborts if orbit is not found.
+dnl
+
+AC_DEFUN([GNOME_ORBIT_HOOK],[
+	AC_PATH_PROG(ORBIT_CONFIG,orbit-config,no)
+	AC_PATH_PROG(ORBIT_IDL,orbit-idl,no)
+	AC_CACHE_CHECK([for working ORBit environment],gnome_cv_orbit_found,[
+		if test x$ORBIT_CONFIG = xno -o x$ORBIT_IDL = xno; then
+			gnome_cv_orbit_found=no
+		else
+			gnome_cv_orbit_found=yes
+		fi
+	])
+	AM_CONDITIONAL(HAVE_ORBIT, test x$gnome_cv_orbit_found = xyes)
+	if test x$gnome_cv_orbit_found = xyes; then
+		$1
+		ORBIT_CFLAGS=`orbit-config --cflags client server`
+		ORBIT_LIBS=`orbit-config --use-service=name --libs client server`
+		AC_SUBST(ORBIT_CFLAGS)
+		AC_SUBST(ORBIT_LIBS)
+	else
+    		if test x$2 = xfailure; then
+			AC_MSG_ERROR(ORBit not installed or installation problem)
+    		fi
+	fi
+])
+
+AC_DEFUN([GNOME_ORBIT_CHECK], [
+	GNOME_ORBIT_HOOK([],failure)
+])
diff -Nru gnome-print-0.25/macros/gnome-print-check.m4 gnome-print-0.25.new/macros/gnome-print-check.m4
--- gnome-print-0.25/macros/gnome-print-check.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-print-check.m4	Wed Feb  7 22:33:01 2001
@@ -0,0 +1,171 @@
+# Configure paths for GNOME-PRINT
+# Chris Lahey	99-2-5
+# stolen from Manish Singh again
+# stolen back from Frank Belew
+# stolen from Manish Singh
+# Shamelessly stolen from Owen Taylor
+
+dnl AM_PATH_GNOME_PRINT([MINIMUM-VERSION, [ACTION-IF-FOUND [, ACTION-IF-NOT-FOUND]]])
+dnl Test for GNOME-PRINT, and define GNOME_PRINT_CFLAGS and GNOME_PRINT_LIBS
+dnl
+AC_DEFUN([AM_PATH_GNOME_PRINT],
+[dnl 
+dnl Get the cflags and libraries from the gnome-config script
+dnl
+AC_ARG_WITH(gnome-print-prefix,[  --with-gnome-print-prefix=PFX   Prefix where GNOME-PRINT is installed (optional)],
+            gnome_print_prefix="$withval", gnome_print_prefix="")
+AC_ARG_WITH(gnome-print-exec-prefix,[  --with-gnome-print-exec-prefix=PFX Exec prefix where GNOME-PRINT is installed (optional)],
+            gnome_print_exec_prefix="$withval", gnome_print_exec_prefix="")
+AC_ARG_ENABLE(gnome-printtest, [  --disable-gnome-printtest       Do not try to compile and run a test GNOME-PRINT program],
+		    , enable_gnome_printtest=yes)
+
+  if test x$gnome_print_exec_prefix != x ; then
+     gnome_print_args="$gnome_print_args --exec-prefix=$gnome_print_exec_prefix"
+     if test x${GNOME_CONFIG+set} != xset ; then
+        GNOME_CONFIG=$gnome_print_exec_prefix/bin/gnome-config
+     fi
+  fi
+  if test x$gnome_print_prefix != x ; then
+     gnome_print_args="$gnome_print_args --prefix=$gnome_print_prefix"
+     if test x${GNOME_CONFIG+set} != xset ; then
+        GNOME_CONFIG=$gnome_print_prefix/bin/gnome-config
+     fi
+  fi
+
+  AC_PATH_PROG(GNOME_CONFIG, gnome-config, no)
+  min_gnome_print_version=ifelse([$1], ,0.1.0,$1)
+  AC_MSG_CHECKING(for GNOME-PRINT - version >= $min_gnome_print_version)
+  no_gnome_print=""
+  if test "$GNOME_CONFIG" = "no" ; then
+    no_gnome_print=yes
+  else
+    GNOME_PRINT_CFLAGS=`$GNOME_CONFIG $gnome_printconf_args --cflags print`
+    GNOME_PRINT_LIBS=`$GNOME_CONFIG $gnome_printconf_args --libs print`
+
+    gnome_print_major_version=`$GNOME_CONFIG $gnome_print_args --version | \
+           sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\1/'`
+    gnome_print_minor_version=`$GNOME_CONFIG $gnome_print_args --version | \
+           sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\2/'`
+    gnome_print_micro_version=`$GNOME_CONFIG $gnome_print_config_args --version | \
+           sed 's/\([[0-9]]*\).\([[0-9]]*\).\([[0-9]]*\)/\3/'`
+    if test "x$enable_gnome_printtest" = "xyes" ; then
+      ac_save_CFLAGS="$CFLAGS"
+      ac_save_LIBS="$LIBS"
+      CFLAGS="$CFLAGS $GNOME_PRINT_CFLAGS"
+      LIBS="$LIBS $GNOME_PRINT_LIBS"
+dnl
+dnl Now check if the installed GNOME-PRINT is sufficiently new. (Also sanity
+dnl checks the results of gnome-config to some extent
+dnl
+      rm -f conf.gnome_printtest
+      AC_TRY_RUN([
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+#include <libgnomeprint/gnome-print.h>
+
+static char*
+my_strdup (char *str)
+{
+  char *new_str;
+  
+  if (str)
+    {
+      new_str = malloc ((strlen (str) + 1) * sizeof(char));
+      strcpy (new_str, str);
+    }
+  else
+    new_str = NULL;
+  
+  return new_str;
+}
+
+int main ()
+{
+  int major, minor, micro;
+  char *tmp_version;
+
+  system ("touch conf.gnome_printtest");
+
+  /* HP/UX 9 (%@#!) writes to sscanf strings */
+  tmp_version = my_strdup("$min_gnome_print_version");
+  if (sscanf(tmp_version, "%d.%d.%d", &major, &minor, &micro) != 3) {
+     printf("%s, bad version string\n", "$min_gnome_print_version");
+     exit(1);
+   }
+  return 0;
+#if 0
+   if (($gnome_print_major_version > major) ||
+      (($gnome_print_major_version == major) && ($gnome_print_minor_version > minor)) ||
+      (($gnome_print_major_version == major) && ($gnome_print_minor_version == minor) && ($gnome_print_micro_version >= micro)))
+    {
+      return 0;
+    }
+  else
+    {
+      printf("\n*** 'gnome-config print --version' returned %d.%d.%d, but the minimum version\n", $gnome_print_major_version, $gnome_print_minor_version, $gnome_print_micro_version);
+      printf("*** of GNOME-PRINT required is %d.%d.%d. If gnome-config is correct, then it is\n", major, minor, micro);
+      printf("*** best to upgrade to the required version.\n");
+      printf("*** If gnome-config was wrong, set the environment variable GNOME_CONFIG\n");
+      printf("*** to point to the correct copy of gnome-config, and remove the file\n");
+      printf("*** config.cache before re-running configure\n");
+      return 1;
+    }
+#endif
+}
+
+],, no_gnome_print=yes,[echo $ac_n "cross compiling; assumed OK... $ac_c"])
+       CFLAGS="$ac_save_CFLAGS"
+       LIBS="$ac_save_LIBS"
+     fi
+  fi
+  if test "x$no_gnome_print" = x ; then
+     AC_MSG_RESULT(yes)
+     ifelse([$2], , :, [$2])     
+  else
+     AC_MSG_RESULT(no)
+     if test "$GNOME_CONFIG" = "no" ; then
+       echo "*** The gnome-config script installed by GNOME-LIBS could not be found"
+       echo "*** If GNOME-PRINT was installed in PREFIX, make sure PREFIX/bin is in"
+       echo "*** your path, or set the GNOME_CONFIG environment variable to the"
+       echo "*** full path to gnome-config."
+     else
+       if test -f conf.gnome_printtest ; then
+        :
+       else
+          echo "*** Could not run GNOME-PRINT test program, checking why..."
+          CFLAGS="$CFLAGS $GNOME_PRINT_CFLAGS"
+          LIBS="$LIBS $GNOME_PRINT_LIBS"
+          AC_TRY_LINK([
+#include <stdio.h>
+#include <libgnomeprint/gnome-print.h>
+],      [ return 0; ],
+        [ echo "*** The test program compiled, but did not run. This usually means"
+          echo "*** that the run-time linker is not finding GNOME-PRINT or finding the wrong"
+          echo "*** version of GNOME-PRINT. If it is not finding GNOME-PRINT, you'll need to set your"
+          echo "*** LD_LIBRARY_PATH environment variable, or edit /etc/ld.so.conf to point"
+          echo "*** to the installed location  Also, make sure you have run ldconfig if that"
+          echo "*** is required on your system"
+	  echo "***"
+          echo "*** If you have an old version installed, it is best to remove it, although"
+          echo "*** you may also be able to get things to work by modifying LD_LIBRARY_PATH"],
+        [ echo "*** The test program failed to compile or link. See the file config.log for the"
+          echo "*** exact error that occured. This usually means GNOME-PRINT was incorrectly installed"
+          echo "*** or that you have moved GNOME-PRINT since it was installed. In the latter case, you"
+          echo "*** may want to edit the gnome-config script: $GNOME_CONFIG" ])
+          CFLAGS="$ac_save_CFLAGS"
+          LIBS="$ac_save_LIBS"
+       fi
+     fi
+     GNOME_PRINT_CFLAGS=""
+     GNOME_PRINT_LIBS=""
+     ifelse([$3], , :, [$3])
+  fi
+  AC_SUBST(GNOME_PRINT_CFLAGS)
+  AC_SUBST(GNOME_PRINT_LIBS)
+  rm -f conf.gnome_printtest
+])
+
+AC_DEFUN([GNOME_PRINT_CHECK], [
+	AM_PATH_GNOME_PRINT(0.1.0,,[AC_MSG_ERROR(GNOME-PRINT not found)])
+])
diff -Nru gnome-print-0.25/macros/gnome-pthread-check.m4 gnome-print-0.25.new/macros/gnome-pthread-check.m4
--- gnome-print-0.25/macros/gnome-pthread-check.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-pthread-check.m4	Thu Aug  3 00:26:45 2000
@@ -0,0 +1,16 @@
+dnl
+dnl And better, use gthreads instead...
+dnl
+
+AC_DEFUN([GNOME_PTHREAD_CHECK],[
+	PTHREAD_LIB=""
+	AC_CHECK_LIB(pthread, pthread_create, PTHREAD_LIB="-lpthread",
+		[AC_CHECK_LIB(pthreads, pthread_create, PTHREAD_LIB="-lpthreads",
+		    [AC_CHECK_LIB(c_r, pthread_create, PTHREAD_LIB="-lc_r",
+			[AC_CHECK_FUNC(pthread_create)]
+		    )]
+		)]
+	)
+	AC_SUBST(PTHREAD_LIB)
+	AC_PROVIDE([GNOME_PTHREAD_CHECK])
+])
diff -Nru gnome-print-0.25/macros/gnome-support.m4 gnome-print-0.25.new/macros/gnome-support.m4
--- gnome-print-0.25/macros/gnome-support.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-support.m4	Thu Aug  3 00:26:45 2000
@@ -0,0 +1,68 @@
+dnl GNOME_SUPPORT_CHECKS
+dnl    Check for various support functions needed by the standard
+dnl    Gnome libraries.  Sets LIBOBJS, might define some macros.
+dnl    This should only be used when building the Gnome libs; 
+dnl    Gnome clients should not need this macro.
+AC_DEFUN([GNOME_SUPPORT_CHECKS],[
+  # we need an `awk' to build `gnomesupport.h'
+  AC_REQUIRE([AC_PROG_AWK])
+
+  # this should go away soon
+  need_gnome_support=yes
+
+  save_LIBOBJS="$LIBOBJS"
+  LIBOBJS=
+
+  AC_CHECK_FUNCS(getopt_long,,LIBOBJS="$LIBOBJS getopt.o getopt1.o")
+
+  # for `scandir'
+  AC_HEADER_DIRENT
+
+  # copied from `configure.in' of `libiberty'
+  vars="program_invocation_short_name program_invocation_name sys_errlist"
+  for v in $vars; do
+    AC_MSG_CHECKING([for $v])
+    AC_CACHE_VAL(gnome_cv_var_$v,
+      [AC_TRY_LINK([int *p;], [extern int $v; p = &$v;],
+		   [eval "gnome_cv_var_$v=yes"],
+		   [eval "gnome_cv_var_$v=no"])])
+    if eval "test \"`echo '$gnome_cv_var_'$v`\" = yes"; then
+      AC_MSG_RESULT(yes)
+      n=HAVE_`echo $v | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+      AC_DEFINE_UNQUOTED($n)
+    else
+      AC_MSG_RESULT(no)
+    fi
+  done
+
+  AC_REPLACE_FUNCS(memmove mkstemp scandir strcasecmp strerror strndup strnlen)
+  AC_REPLACE_FUNCS(strtok_r strtod strtol strtoul vasprintf vsnprintf)
+
+  AC_CHECK_FUNCS(realpath,,LIBOBJS="$LIBOBJS canonicalize.o")
+
+  # to include `error.c' error.c has some HAVE_* checks
+  AC_CHECK_FUNCS(vprintf doprnt strerror_r)
+  AM_FUNC_ERROR_AT_LINE
+
+  # This is required if we declare setreuid () and setregid ().
+  AC_TYPE_UID_T
+
+  # see if we need to declare some functions.  Solaris is notorious for
+  # putting functions into the `libc' but not listing them in the headers
+  AC_CHECK_HEADERS(string.h strings.h stdlib.h unistd.h dirent.h)
+  GCC_NEED_DECLARATIONS(gethostname setreuid setregid getpagesize)
+  GCC_NEED_DECLARATION(scandir,[
+#ifdef HAVE_DIRENT_H
+#include <dirent.h>
+#endif
+])
+
+  # Turn our LIBOBJS into libtool objects.  This is gross, but it
+  # requires changes to autoconf before it goes away.
+  LTLIBOBJS=`echo "$LIBOBJS" | sed 's/\.o/.lo/g'`
+  AC_SUBST(need_gnome_support)
+  AC_SUBST(LTLIBOBJS)
+
+  LIBOBJS="$save_LIBOBJS"
+  AM_CONDITIONAL(BUILD_GNOME_SUPPORT, test "$need_gnome_support" = yes)
+])
diff -Nru gnome-print-0.25/macros/gnome-undelfs.m4 gnome-print-0.25.new/macros/gnome-undelfs.m4
--- gnome-print-0.25/macros/gnome-undelfs.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-undelfs.m4	Thu Aug  3 00:26:45 2000
@@ -0,0 +1,20 @@
+dnl GNOME_UNDELFS_CHECKS
+dnl    Check for ext2fs undel support.
+dnl    Set shell variable ext2fs_undel to "yes" if we have it,
+dnl    "no" otherwise.  May define USE_EXT2FSLIB for cpp.
+dnl    Will set EXT2FS_UNDEL_LIBS to required libraries.
+
+AC_DEFUN([GNOME_UNDELFS_CHECKS], [
+  AC_CHECK_HEADERS(ext2fs/ext2fs.h linux/ext2_fs.h)
+  ext2fs_undel=no
+  EXT2FS_UNDEL_LIBS=
+  if test x$ac_cv_header_ext2fs_ext2fs_h = xyes
+  then
+    if test x$ac_cv_header_linux_ext2_fs_h = xyes
+    then
+      AC_DEFINE(USE_EXT2FSLIB)
+      ext2fs_undel=yes
+      EXT2FS_UNDEL_LIBS="-lext2fs -lcom_err"
+    fi
+  fi
+])
diff -Nru gnome-print-0.25/macros/gnome-vfs.m4 gnome-print-0.25.new/macros/gnome-vfs.m4
--- gnome-print-0.25/macros/gnome-vfs.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-vfs.m4	Tue Jan 30 18:39:59 2001
@@ -0,0 +1,120 @@
+dnl GNOME_VFS_CHECKS
+dnl   Check for various functions needed by libvfs.
+dnl   This has various effects:
+dnl     Sets GNOME_VFS_LIBS to libraries required
+dnl     Sets termnet  to true or false depending on whether it is required.
+dnl        If yes, defines USE_TERMNET.
+dnl     Sets vfs_flags to "pretty" list of vfs implementations we include.
+dnl     Sets shell variable use_vfs to yes (default, --with-vfs) or
+dnl        "no" (--without-vfs).
+dnl     Calls AC_SUBST(mcserv), which is either empty or "mcserv".
+
+dnl Private define
+AC_DEFUN([GNOME_WITH_VFS],[
+  dnl FIXME: network checks should probably be in their own macro.
+  AC_CHECK_LIB(nsl, t_accept)
+  AC_CHECK_LIB(socket, socket)
+
+  have_socket=no
+  AC_CHECK_FUNCS(socket, have_socket=yes)
+  if test $have_socket = no; then
+    # socket is not in the default libraries.  See if it's in some other.
+    for lib in bsd socket inet; do
+      AC_CHECK_LIB($lib, socket, [
+	  LIBS="$LIBS -l$lib"
+	  have_socket=yes
+	  AC_DEFINE(HAVE_SOCKET)
+	  break])
+    done
+  fi
+
+  have_gethostbyname=no
+  AC_CHECK_FUNC(gethostbyname, have_gethostbyname=yes)
+  if test $have_gethostbyname = no; then
+    # gethostbyname is not in the default libraries.  See if it's in some other.
+    for lib in bsd socket inet; do
+      AC_CHECK_LIB($lib, gethostbyname, [LIBS="$LIBS -l$lib"; have_gethostbyname=yes; break])
+    done
+  fi
+
+  vfs_flags="tarfs"
+  use_net_code=false
+  if test $have_socket = yes; then
+      AC_STRUCT_LINGER
+      AC_CHECK_FUNCS(pmap_set, , [
+	 AC_CHECK_LIB(rpc, pmap_set, [
+	   LIBS="-lrpc $LIBS"
+	  AC_DEFINE(HAVE_PMAP_SET)
+	  ])])
+      AC_CHECK_FUNCS(pmap_getport pmap_getmaps rresvport)
+      dnl add for source routing support setsockopt
+      AC_CHECK_HEADERS(rpc/pmap_clnt.h)
+      vfs_flags="$vfs_flags, mcfs, ftpfs, fish"
+      use_net_code=true
+  fi
+
+  dnl
+  dnl Samba support
+  dnl
+  smbfs=""
+  SAMBAFILES=""
+  AC_ARG_WITH(samba,
+  	  [--with-samba	            Support smb virtual file system],[
+  	  if test "x$withval" != "xno"; then
+  		  AC_DEFINE(WITH_SMBFS)
+	          vfs_flags="$vfs_flags, smbfs"
+		  smbfs="smbfs.o"
+		  SAMBAFILES="\$(SAMBAFILES)"
+  	  fi
+  ])
+  AC_SUBST(smbfs)
+  AC_SUBST(SAMBAFILES)
+  
+  dnl
+  dnl The termnet support
+  dnl
+  termnet=false
+  AC_ARG_WITH(termnet,
+	  [--with-termnet             If you want a termified net support],[
+	  if test x$withval = xyes; then
+		  AC_DEFINE(USE_TERMNET)
+		  termnet=true		
+	  fi
+  ])
+
+  TERMNET=""
+  AC_DEFINE(USE_VFS)
+  if $use_net_code; then
+     AC_DEFINE(USE_NETCODE)
+  fi
+  mcserv=
+  if test $have_socket = yes; then
+     mcserv="mcserv"
+     if $termnet; then
+	TERMNET="-ltermnet"
+     fi
+  fi
+
+  AC_SUBST(TERMNET)
+  AC_SUBST(mcserv)
+
+dnl FIXME:
+dnl GNOME_VFS_LIBS=
+
+])
+
+AC_DEFUN([GNOME_VFS_CHECKS],[
+	use_vfs=yes
+	AC_ARG_WITH(vfs,
+		[--with-vfs		   Compile with the VFS code],
+		use_vfs=$withval
+	)
+	case $use_vfs in
+		yes) 	GNOME_WITH_VFS;;
+		no) 	use_vfs=no;;
+		*)   	use_vfs=no;;
+			dnl Should we issue a warning?
+	esac
+])
+
+
diff -Nru gnome-print-0.25/macros/gnome-x-checks.m4 gnome-print-0.25.new/macros/gnome-x-checks.m4
--- gnome-print-0.25/macros/gnome-x-checks.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-x-checks.m4	Thu Aug  3 00:26:45 2000
@@ -0,0 +1,80 @@
+dnl GNOME_X_CHECKS
+dnl
+dnl Basic X11 related checks for X11.  At the end, the following will be
+dnl defined/changed:
+dnl   GTK_{CFLAGS,LIBS}      From AM_PATH_GTK
+dnl   CPPFLAGS		     Will include $X_CFLAGS
+dnl   GNOME_HAVE_SM	     `true' or `false' depending on whether session
+dnl                          management is available.  It is available if
+dnl                          both -lSM and X11/SM/SMlib.h exist.  (Some
+dnl                          Solaris boxes have the library but not the header)
+dnl   XPM_LIBS               -lXpm if Xpm library is present, otherwise ""
+dnl
+dnl The following configure cache variables are defined (but not used):
+dnl   gnome_cv_passdown_{x_libs,X_LIBS,X_CFLAGS}
+dnl
+AC_DEFUN([GNOME_X_CHECKS],
+[
+	AM_PATH_GTK(1.2.0,,AC_MSG_ERROR(GTK not installed, or gtk-config not in path))
+	dnl Hope that GTK_CFLAGS have only -I and -D.  Otherwise, we could
+	dnl   test -z "$x_includes" || CPPFLAGS="$CPPFLAGS -I$x_includes"
+	dnl
+	dnl Use CPPFLAGS instead of CFLAGS because AC_CHECK_HEADERS uses
+	dnl CPPFLAGS, not CFLAGS
+        CPPFLAGS="$CPPFLAGS $GTK_CFLAGS"
+
+        saved_ldflags="$LDFLAGS"
+        LDFLAGS="$LDFLAGS $GTK_LIBS"
+
+	gnome_cv_passdown_x_libs="$GTK_LIBS"
+	gnome_cv_passdown_X_LIBS="$GTK_LIBS"
+	gnome_cv_passdown_X_CFLAGS="$GTK_CFLAGS"
+	gnome_cv_passdown_GTK_LIBS="$GTK_LIBS"
+
+        LDFLAGS="$saved_ldflags $GTK_LIBS"
+
+dnl We are requiring GTK >= 1.1.1, which means this will be fine anyhow.
+	USE_DEVGTK=true
+
+dnl	AC_MSG_CHECKING([whether to use features from (unstable) GTK+ 1.1.x])
+dnl	AC_EGREP_CPP(answer_affirmatively,
+dnl	[#include <gtk/gtkfeatures.h>
+dnl	#ifdef GTK_HAVE_FEATURES_1_1_0
+dnl	   answer_affirmatively
+dnl	#endif
+dnl	], dev_gtk=yes, dev_gtk=no)
+dnl	if test "$dev_gtk" = "yes"; then
+dnl	   USE_DEVGTK=true
+dnl	fi
+dnl	AC_MSG_RESULT("$dev_gtk")
+
+	GNOME_HAVE_SM=true
+	case "$GTK_LIBS" in
+	 *-lSM*)
+	    dnl Already found it.
+	    ;;
+	 *)
+	    dnl Assume that if we have -lSM then we also have -lICE.
+	    AC_CHECK_LIB(SM, SmcSaveYourselfDone,
+	        [GTK_LIBS="-lSM -lICE $GTK_LIBS"],GNOME_HAVE_SM=false,
+		$x_libs -lICE)
+	    ;;
+	esac
+
+	if test "$GNOME_HAVE_SM" = true; then
+	   AC_CHECK_HEADERS(X11/SM/SMlib.h,,GNOME_HAVE_SM=false)
+	fi
+
+	if test "$GNOME_HAVE_SM" = true; then
+	   AC_DEFINE(HAVE_LIBSM)
+	fi
+
+	XPM_LIBS=""
+	AC_CHECK_LIB(Xpm, XpmFreeXpmImage, [XPM_LIBS="-lXpm"], , $x_libs)
+	AC_SUBST(XPM_LIBS)
+
+	AC_REQUIRE([GNOME_PTHREAD_CHECK])
+        LDFLAGS="$saved_ldflags"
+
+	AC_PROVIDE([GNOME_X_CHECKS])
+])
diff -Nru gnome-print-0.25/macros/gnome-xml-check.m4 gnome-print-0.25.new/macros/gnome-xml-check.m4
--- gnome-print-0.25/macros/gnome-xml-check.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome-xml-check.m4	Mon Nov  6 22:40:14 2000
@@ -0,0 +1,32 @@
+dnl
+dnl GNOME_XML_HOOK (script-if-xml-found, failflag)
+dnl
+dnl If failflag is "failure", script aborts due to lack of XML
+dnl 
+dnl Check for availability of the libxml library
+dnl the XML parser uses libz if available too
+dnl
+
+AC_DEFUN([GNOME_XML_HOOK],[
+	AC_PATH_PROG(GNOME_CONFIG,gnome-config,no)
+	if test "$GNOME_CONFIG" = no; then
+		if test x$2 = xfailure; then
+			AC_MSG_ERROR(Could not find gnome-config)
+		fi
+	fi
+	GNOME_XML_CFLAGS=`$GNOME_CONFIG --cflags xml`
+	AC_SUBST(GNOME_XML_CFLAGS)
+	AC_CHECK_LIB(xml, xmlNewDoc, [
+		$1
+		GNOME_XML_LIB=`$GNOME_CONFIG --libs xml`
+	], [
+		if test x$2 = xfailure; then 
+			AC_MSG_ERROR(Could not link sample xml program)
+		fi
+	], `$GNOME_CONFIG --libs xml`)
+	AC_SUBST(GNOME_XML_LIB)
+])
+
+AC_DEFUN([GNOME_XML_CHECK], [
+	GNOME_XML_HOOK([],failure)
+])
diff -Nru gnome-print-0.25/macros/gnome.m4 gnome-print-0.25.new/macros/gnome.m4
--- gnome-print-0.25/macros/gnome.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gnome.m4	Thu Aug  3 00:26:45 2000
@@ -0,0 +1,128 @@
+dnl
+dnl GNOME_INIT_HOOK (script-if-gnome-enabled, [failflag], [additional-inits])
+dnl
+dnl if failflag is "fail" then GNOME_INIT_HOOK will abort if gnomeConf.sh
+dnl is not found. 
+dnl
+
+AC_DEFUN([GNOME_INIT_HOOK],[
+	AC_SUBST(GNOME_LIBS)
+	AC_SUBST(GNOMEUI_LIBS)
+	AC_SUBST(GNOMEGNORBA_LIBS)
+	AC_SUBST(GTKXMHTML_LIBS)
+	AC_SUBST(ZVT_LIBS)
+	AC_SUBST(GNOME_LIBDIR)
+	AC_SUBST(GNOME_INCLUDEDIR)
+
+	AC_ARG_WITH(gnome-includes,
+	[  --with-gnome-includes   Specify location of GNOME headers],[
+	CFLAGS="$CFLAGS -I$withval"
+	])
+	
+	AC_ARG_WITH(gnome-libs,
+	[  --with-gnome-libs       Specify location of GNOME libs],[
+	LDFLAGS="$LDFLAGS -L$withval"
+	gnome_prefix=$withval
+	])
+
+	AC_ARG_WITH(gnome,
+	[  --with-gnome            Specify prefix for GNOME files],
+		if test x$withval = xyes; then
+	    		want_gnome=yes
+	    		dnl Note that an empty true branch is not
+			dnl valid sh syntax.
+	    		ifelse([$1], [], :, [$1])
+        	else
+	    		if test "x$withval" = xno; then
+	        		want_gnome=no
+	    		else
+	        		want_gnome=yes
+	    			LDFLAGS="$LDFLAGS -L$withval/lib"
+	    			CFLAGS="$CFLAGS -I$withval/include"
+	    			gnome_prefix=$withval/lib
+	    		fi
+  		fi,
+		want_gnome=yes)
+
+	if test "x$want_gnome" = xyes; then
+
+	    AC_PATH_PROG(GNOME_CONFIG,gnome-config,no)
+	    if test "$GNOME_CONFIG" = "no"; then
+	      no_gnome_config="yes"
+	    else
+	      AC_MSG_CHECKING(if $GNOME_CONFIG works)
+	      if $GNOME_CONFIG --libs-only-l gnome >/dev/null 2>&1; then
+	        AC_MSG_RESULT(yes)
+	        GNOME_GNORBA_HOOK([],$2)
+	        GNOME_LIBS="`$GNOME_CONFIG --libs-only-l gnome`"
+	        GNOMEUI_LIBS="`$GNOME_CONFIG --libs-only-l gnomeui`"
+	        GNOMEGNORBA_LIBS="`$GNOME_CONFIG --libs-only-l gnorba gnomeui`"
+	        GTKXMHTML_LIBS="`$GNOME_CONFIG --libs-only-l gtkxmhtml`"
+		ZVT_LIBS="`$GNOME_CONFIG --libs-only-l zvt`"
+	        GNOME_LIBDIR="`$GNOME_CONFIG --libs-only-L gnorba gnomeui`"
+	        GNOME_INCLUDEDIR="`$GNOME_CONFIG --cflags gnorba gnomeui`"
+                $1
+	      else
+	        AC_MSG_RESULT(no)
+	        no_gnome_config="yes"
+              fi
+            fi
+
+	    if test x$exec_prefix = xNONE; then
+	        if test x$prefix = xNONE; then
+		    gnome_prefix=$ac_default_prefix/lib
+	        else
+ 		    gnome_prefix=$prefix/lib
+	        fi
+	    else
+	        gnome_prefix=`eval echo \`echo $libdir\``
+	    fi
+	
+	    if test "$no_gnome_config" = "yes"; then
+              AC_MSG_CHECKING(for gnomeConf.sh file in $gnome_prefix)
+	      if test -f $gnome_prefix/gnomeConf.sh; then
+	        AC_MSG_RESULT(found)
+	        echo "loading gnome configuration from" \
+		     "$gnome_prefix/gnomeConf.sh"
+	        . $gnome_prefix/gnomeConf.sh
+	        $1
+	      else
+	        AC_MSG_RESULT(not found)
+ 	        if test x$2 = xfail; then
+	          AC_MSG_ERROR(Could not find the gnomeConf.sh file that is generated by gnome-libs install)
+ 	        fi
+	      fi
+            fi
+	fi
+
+	if test -n "$3"; then
+	  n="$3"
+	  for i in $n; do
+	    AC_MSG_CHECKING(extra library \"$i\")
+	    case $i in 
+	      applets)
+		AC_SUBST(GNOME_APPLETS_LIBS)
+		GNOME_APPLETS_LIBS=`$GNOME_CONFIG --libs-only-l applets`
+		AC_MSG_RESULT($GNOME_APPLETS_LIBS);;
+	      docklets)
+		AC_SUBST(GNOME_DOCKLETS_LIBS)
+		GNOME_DOCKLETS_LIBS=`$GNOME_CONFIG --libs-only-l docklets`
+		AC_MSG_RESULT($GNOME_DOCKLETS_LIBS);;
+	      capplet)
+		AC_SUBST(GNOME_CAPPLET_LIBS)
+		GNOME_CAPPLET_LIBS=`$GNOME_CONFIG --libs-only-l capplet`
+		AC_MSG_RESULT($GNOME_CAPPLET_LIBS);;
+	      *)
+		AC_MSG_RESULT(unknown library)
+	    esac
+	  done
+	fi
+])
+
+dnl
+dnl GNOME_INIT ([additional-inits])
+dnl
+
+AC_DEFUN([GNOME_INIT],[
+	GNOME_INIT_HOOK([],fail,$1)
+])
diff -Nru gnome-print-0.25/macros/gperf-check.m4 gnome-print-0.25.new/macros/gperf-check.m4
--- gnome-print-0.25/macros/gperf-check.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/gperf-check.m4	Thu Aug  3 00:26:45 2000
@@ -0,0 +1,79 @@
+dnl
+dnl AC_PROG_GPERF (MINIMUM-VERSION)
+dnl
+dnl Check for availability of gperf.
+dnl Abort if not found or if current version is not up to par.
+dnl
+
+AC_DEFUN([AC_PROG_GPERF],[
+	AC_PATH_PROG(GPERF, gperf, no)
+	if test "$GPERF" = no; then
+		AC_MSG_ERROR(Could not find gperf)
+	fi
+	min_gperf_version=ifelse([$1], ,2.7,$1)
+	AC_MSG_CHECKING(for gperf - version >= $min_gperf_version)
+	gperf_major_version=`$GPERF --version | \
+		sed 's/GNU gperf \([[0-9]]*\).\([[0-9]]*\)/\1/'`
+	gperf_minor_version=`$GPERF --version | \
+		sed 's/GNU gperf \([[0-9]]*\).\([[0-9]]*\)/\2/'`
+	no_gperf=""
+dnl
+dnl Now check if the installed gperf is sufficiently new.
+dnl
+	AC_TRY_RUN([
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+
+static char*
+my_strdup (char *str)
+{
+  char *new_str;
+  
+  if (str)
+    {
+      new_str = malloc ((strlen (str) + 1) * sizeof(char));
+      strcpy (new_str, str);
+    }
+  else
+    new_str = NULL;
+  
+  return new_str;
+}
+
+int 
+main ()
+{
+  char  *tmp_version;
+  
+  int    major;
+  int    minor;
+
+  /* HP/UX 9 (%@#!) writes to sscanf strings */
+  tmp_version = my_strdup("$min_gperf_version");
+  if (sscanf(tmp_version, "%d.%d", &major, &minor) != 2) {
+    printf ("%s, bad version string\n", "$min_gperf_version");
+    exit (1);
+  }
+
+  if (($gperf_major_version > major) ||
+      (($gperf_major_version == major) && ($gperf_minor_version >= minor))) {
+    return 0;
+  } else {
+    printf ("\n");
+    printf ("*** An old version of gperf ($gperf_major_version.$gperf_minor_version) was found.\n");
+    printf ("*** You need a version of gperf newer than %d.%d.%d.  The latest version of\n",
+	       major, minor);
+    printf ("*** gperf is always available from ftp://ftp.gnu.org.\n");
+    printf ("***\n");
+    return 1;
+  }
+}
+],,no_gperf=yes,[/bin/true])
+	if test "x$no_gperf" = x ; then
+		AC_MSG_RESULT(yes)
+	else
+		AC_MSG_RESULT(no)
+	fi
+
+])
diff -Nru gnome-print-0.25/macros/linger.m4 gnome-print-0.25.new/macros/linger.m4
--- gnome-print-0.25/macros/linger.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/linger.m4	Wed Feb  7 22:33:01 2001
@@ -0,0 +1,28 @@
+dnl
+dnl Check for struct linger
+dnl
+AC_DEFUN([AC_STRUCT_LINGER], [
+av_struct_linger=no
+AC_MSG_CHECKING(struct linger is available)
+AC_TRY_RUN([
+#include <sys/types.h>
+#include <sys/socket.h>
+
+struct linger li;
+
+main ()
+{
+    li.l_onoff = 1;
+    li.l_linger = 120;
+    exit (0);
+}
+],[
+AC_DEFINE(HAVE_STRUCT_LINGER)
+av_struct_linger=yes
+],[
+av_struct_linger=no
+],[
+av_struct_linger=no
+])
+AC_MSG_RESULT($av_struct_linger)
+])
diff -Nru gnome-print-0.25/macros/need-declaration.m4 gnome-print-0.25.new/macros/need-declaration.m4
--- gnome-print-0.25/macros/need-declaration.m4	Thu Jan  1 01:00:00 1970
+++ gnome-print-0.25.new/macros/need-declaration.m4	Wed Feb  7 22:33:01 2001
@@ -0,0 +1,42 @@
+dnl See whether we need a declaration for a function.
+dnl GCC_NEED_DECLARATION(FUNCTION [, EXTRA-HEADER-FILES])
+AC_DEFUN([GCC_NEED_DECLARATION],
+[AC_MSG_CHECKING([whether $1 must be declared])
+AC_CACHE_VAL(gcc_cv_decl_needed_$1,
+[AC_TRY_COMPILE([
+#include <stdio.h>
+#ifdef HAVE_STRING_H
+#include <string.h>
+#else
+#ifdef HAVE_STRINGS_H
+#include <strings.h>
+#endif
+#endif
+#ifdef HAVE_STDLIB_H
+#include <stdlib.h>
+#endif
+#ifdef HAVE_UNISTD_H
+#include <unistd.h>
+#endif
+$2],
+[char *(*pfn) = (char *(*)) $1],
+eval "gcc_cv_decl_needed_$1=no", eval "gcc_cv_decl_needed_$1=yes")])
+if eval "test \"`echo '$gcc_cv_decl_needed_'$1`\" = yes"; then
+  AC_MSG_RESULT(yes)
+  gcc_need_declarations="$gcc_need_declarations $1"
+  gcc_tr_decl=NEED_DECLARATION_`echo $1 | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+  AC_DEFINE_UNQUOTED($gcc_tr_decl)
+else
+  AC_MSG_RESULT(no)
+fi
+])dnl
+
+dnl Check multiple functions to see whether each needs a declaration.
+dnl GCC_NEED_DECLARATIONS(FUNCTION... [, EXTRA-HEADER-FILES])
+AC_DEFUN([GCC_NEED_DECLARATIONS],
+[for ac_func in $1
+do
+GCC_NEED_DECLARATION($ac_func, $2)
+done
+]
+)
